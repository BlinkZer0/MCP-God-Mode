#!/usr/bin/env node
"use strict";var f=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var k=f((kp,ci)=>{"use strict";var qr=class t extends Error{constructor(e){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${e.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,t)}};ci.exports=t=>{if(t.length>2)throw new qr(t);function e(n={}){this.options=n}e.prototype.transform=t;function r(n){return new e(n)}return r.Format=e,r}});var gi=f((Yp,pi)=>{var hi={};pi.exports=hi;var di={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(di).forEach(function(t){var e=di[t],r=hi[t]=[];r.open="\x1B["+e[0]+"m",r.close="\x1B["+e[1]+"m"})});var yi=f((Vp,mi)=>{"use strict";mi.exports=function(t,e){e=e||process.argv||[];var r=e.indexOf("--"),n=/^-{1,2}/.test(t)?"":"--",i=e.indexOf(n+t);return i!==-1&&(r===-1?!0:i<r)}});var bi=f((Kp,_i)=>{"use strict";var qu=require("os"),ee=yi(),U=process.env,je=void 0;ee("no-color")||ee("no-colors")||ee("color=false")?je=!1:(ee("color")||ee("colors")||ee("color=true")||ee("color=always"))&&(je=!0);"FORCE_COLOR"in U&&(je=U.FORCE_COLOR.length===0||parseInt(U.FORCE_COLOR,10)!==0);function Lu(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Au(t){if(je===!1)return 0;if(ee("color=16m")||ee("color=full")||ee("color=truecolor"))return 3;if(ee("color=256"))return 2;if(t&&!t.isTTY&&je!==!0)return 0;var e=je?1:0;if(process.platform==="win32"){var r=qu.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in U)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(i){return i in U})||U.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in U)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(U.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in U){var n=parseInt((U.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(U.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(U.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(U.TERM)||"COLORTERM"in U?1:(U.TERM==="dumb",e)}function Lr(t){var e=Au(t);return Lu(e)}_i.exports={supportsColor:Lr,stdout:Lr(process.stdout),stderr:Lr(process.stderr)}});var wi=f((Jp,vi)=>{vi.exports=function(e,r){var n="";e=e||"Run the trap, drop the bass",e=e.split("");var i={a:["@","\u0104","\u023A","\u0245","\u0394","\u039B","\u0414"],b:["\xDF","\u0181","\u0243","\u026E","\u03B2","\u0E3F"],c:["\xA9","\u023B","\u03FE"],d:["\xD0","\u018A","\u0500","\u0501","\u0502","\u0503"],e:["\xCB","\u0115","\u018E","\u0258","\u03A3","\u03BE","\u04BC","\u0A6C"],f:["\u04FA"],g:["\u0262"],h:["\u0126","\u0195","\u04A2","\u04BA","\u04C7","\u050A"],i:["\u0F0F"],j:["\u0134"],k:["\u0138","\u04A0","\u04C3","\u051E"],l:["\u0139"],m:["\u028D","\u04CD","\u04CE","\u0520","\u0521","\u0D69"],n:["\xD1","\u014B","\u019D","\u0376","\u03A0","\u048A"],o:["\xD8","\xF5","\xF8","\u01FE","\u0298","\u047A","\u05DD","\u06DD","\u0E4F"],p:["\u01F7","\u048E"],q:["\u09CD"],r:["\xAE","\u01A6","\u0210","\u024C","\u0280","\u042F"],s:["\xA7","\u03DE","\u03DF","\u03E8"],t:["\u0141","\u0166","\u0373"],u:["\u01B1","\u054D"],v:["\u05D8"],w:["\u0428","\u0460","\u047C","\u0D70"],x:["\u04B2","\u04FE","\u04FC","\u04FD"],y:["\xA5","\u04B0","\u04CB"],z:["\u01B5","\u0240"]};return e.forEach(function(s){s=s.toLowerCase();var o=i[s]||[" "],a=Math.floor(Math.random()*o.length);typeof i[s]<"u"?n+=i[s][a]:n+=s}),n}});var Ei=f((Zp,Si)=>{Si.exports=function(e,r){e=e||"   he is here   ";var n={up:["\u030D","\u030E","\u0304","\u0305","\u033F","\u0311","\u0306","\u0310","\u0352","\u0357","\u0351","\u0307","\u0308","\u030A","\u0342","\u0313","\u0308","\u034A","\u034B","\u034C","\u0303","\u0302","\u030C","\u0350","\u0300","\u0301","\u030B","\u030F","\u0312","\u0313","\u0314","\u033D","\u0309","\u0363","\u0364","\u0365","\u0366","\u0367","\u0368","\u0369","\u036A","\u036B","\u036C","\u036D","\u036E","\u036F","\u033E","\u035B","\u0346","\u031A"],down:["\u0316","\u0317","\u0318","\u0319","\u031C","\u031D","\u031E","\u031F","\u0320","\u0324","\u0325","\u0326","\u0329","\u032A","\u032B","\u032C","\u032D","\u032E","\u032F","\u0330","\u0331","\u0332","\u0333","\u0339","\u033A","\u033B","\u033C","\u0345","\u0347","\u0348","\u0349","\u034D","\u034E","\u0353","\u0354","\u0355","\u0356","\u0359","\u035A","\u0323"],mid:["\u0315","\u031B","\u0300","\u0301","\u0358","\u0321","\u0322","\u0327","\u0328","\u0334","\u0335","\u0336","\u035C","\u035D","\u035E","\u035F","\u0360","\u0362","\u0338","\u0337","\u0361"," \u0489"]},i=[].concat(n.up,n.down,n.mid);function s(l){var d=Math.floor(Math.random()*l);return d}function o(l){var d=!1;return i.filter(function(g){d=g===l}),d}function a(l,d){var g="",y,h;d=d||{},d.up=typeof d.up<"u"?d.up:!0,d.mid=typeof d.mid<"u"?d.mid:!0,d.down=typeof d.down<"u"?d.down:!0,d.size=typeof d.size<"u"?d.size:"maxi",l=l.split("");for(h in l)if(!o(h)){switch(g=g+l[h],y={up:0,down:0,mid:0},d.size){case"mini":y.up=s(8),y.mid=s(2),y.down=s(8);break;case"maxi":y.up=s(16)+3,y.mid=s(4)+1,y.down=s(64)+3;break;default:y.up=s(8)+1,y.mid=s(6)/2,y.down=s(8)+1;break}var v=["up","mid","down"];for(var u in v)for(var m=v[u],w=0;w<=y[m];w++)d[m]&&(g=g+n[m][s(n[m].length)])}return g}return a(e,r)}});var Mi=f((Xp,Oi)=>{Oi.exports=function(t){return function(e,r,n){if(e===" ")return e;switch(r%3){case 0:return t.red(e);case 1:return t.white(e);case 2:return t.blue(e)}}}});var xi=f((Qp,Ri)=>{Ri.exports=function(t){return function(e,r,n){return r%2===0?e:t.inverse(e)}}});var qi=f((eg,Ti)=>{Ti.exports=function(t){var e=["red","yellow","green","blue","magenta"];return function(r,n,i){return r===" "?r:t[e[n++%e.length]](r)}}});var Ai=f((tg,Li)=>{Li.exports=function(t){var e=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return r===" "?r:t[e[Math.round(Math.random()*(e.length-2))]](r)}}});var Ci=f((ng,Ni)=>{var R={};Ni.exports=R;R.themes={};var Iu=require("util"),ve=R.styles=gi(),Pi=Object.defineProperties,Pu=new RegExp(/[\r\n]+/g);R.supportsColor=bi().supportsColor;typeof R.enabled>"u"&&(R.enabled=R.supportsColor()!==!1);R.enable=function(){R.enabled=!0};R.disable=function(){R.enabled=!1};R.stripColors=R.strip=function(t){return(""+t).replace(/\x1B\[\d+m/g,"")};var rg=R.stylize=function(e,r){if(!R.enabled)return e+"";var n=ve[r];return!n&&r in R?R[r](e):n.open+e+n.close},Du=/[|\\{}()[\]^$+*?.]/g,ju=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(Du,"\\$&")};function Di(t){var e=function r(){return Cu.apply(r,arguments)};return e._styles=t,e.__proto__=Nu,e}var ji=function(){var t={};return ve.grey=ve.gray,Object.keys(ve).forEach(function(e){ve[e].closeRe=new RegExp(ju(ve[e].close),"g"),t[e]={get:function(){return Di(this._styles.concat(e))}}}),t}(),Nu=Pi(function(){},ji);function Cu(){var t=Array.prototype.slice.call(arguments),e=t.map(function(o){return o!=null&&o.constructor===String?o:Iu.inspect(o)}).join(" ");if(!R.enabled||!e)return e;for(var r=e.indexOf(`
`)!=-1,n=this._styles,i=n.length;i--;){var s=ve[n[i]];e=s.open+e.replace(s.closeRe,s.open)+s.close,r&&(e=e.replace(Pu,function(o){return s.close+o+s.open}))}return e}R.setTheme=function(t){if(typeof t!="string")for(var e in t)(function(r){R[r]=function(n){if(typeof t[r]=="object"){var i=n;for(var s in t[r])i=R[t[r][s]](i);return i}return R[t[r]](n)}})(e)};function $u(){var t={};return Object.keys(ji).forEach(function(e){t[e]={get:function(){return Di([e])}}}),t}var Fu=function(e,r){var n=r.split("");return n=n.map(e),n.join("")};R.trap=wi();R.zalgo=Ei();R.maps={};R.maps.america=Mi()(R);R.maps.zebra=xi()(R);R.maps.rainbow=qi()(R);R.maps.random=Ai()(R);for(Ii in R.maps)(function(t){R[t]=function(e){return Fu(R.maps[t],e)}})(Ii);var Ii;Pi(R,$u())});var Ar=f((ig,$i)=>{var Bu=Ci();$i.exports=Bu});var Fi=f(Ir=>{"use strict";Ir.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9};Ir.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}});var Bi=f(Pr=>{"use strict";Pr.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6};Pr.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}});var Wi=f(Dr=>{"use strict";Dr.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7};Dr.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}});var zi=f(Mt=>{"use strict";Object.defineProperty(Mt,"cli",{value:Fi()});Object.defineProperty(Mt,"npm",{value:Bi()});Object.defineProperty(Mt,"syslog",{value:Wi()})});var $=f(Je=>{"use strict";Object.defineProperty(Je,"LEVEL",{value:Symbol.for("level")});Object.defineProperty(Je,"MESSAGE",{value:Symbol.for("message")});Object.defineProperty(Je,"SPLAT",{value:Symbol.for("splat")});Object.defineProperty(Je,"configs",{value:zi()})});var Tt=f((fg,xt)=>{"use strict";var Cr=Ar(),{LEVEL:jr,MESSAGE:Nr}=$();Cr.enabled=!0;var Hi=/\s+/,Rt=class t{constructor(e={}){e.colors&&this.addColors(e.colors),this.options=e}static addColors(e){let r=Object.keys(e).reduce((n,i)=>(n[i]=Hi.test(e[i])?e[i].split(Hi):e[i],n),{});return t.allColors=Object.assign({},t.allColors||{},r),t.allColors}addColors(e){return t.addColors(e)}colorize(e,r,n){if(typeof n>"u"&&(n=r),!Array.isArray(t.allColors[e]))return Cr[t.allColors[e]](n);for(let i=0,s=t.allColors[e].length;i<s;i++)n=Cr[t.allColors[e][i]](n);return n}transform(e,r){return r.all&&typeof e[Nr]=="string"&&(e[Nr]=this.colorize(e[jr],e.level,e[Nr])),(r.level||r.all||!r.message)&&(e.level=this.colorize(e[jr],e.level)),(r.all||r.message)&&(e.message=this.colorize(e[jr],e.level,e.message)),e}};xt.exports=t=>new Rt(t);xt.exports.Colorizer=xt.exports.Format=Rt});var Gi=f((cg,Ui)=>{"use strict";var{Colorizer:Wu}=Tt();Ui.exports=t=>(Wu.addColors(t.colors||t),t)});var Yi=f((dg,ki)=>{"use strict";var zu=k();ki.exports=zu(t=>(t.message=`	${t.message}`,t))});var Ji=f((hg,Ki)=>{"use strict";var Hu=k(),{LEVEL:Vi,MESSAGE:$r}=$();Ki.exports=Hu((t,{stack:e,cause:r})=>{if(t instanceof Error){let i=Object.assign({},t,{level:t.level,[Vi]:t[Vi]||t.level,message:t.message,[$r]:t[$r]||t.message});return e&&(i.stack=t.stack),r&&(i.cause=t.cause),i}if(!(t.message instanceof Error))return t;let n=t.message;return Object.assign(t,n),t.message=n.message,t[$r]=n.message,e&&(t.stack=n.stack),r&&(t.cause=n.cause),t})});var Br=f((pg,Lt)=>{"use strict";var{configs:Uu,LEVEL:Zi,MESSAGE:Fr}=$(),qt=class t{constructor(e={levels:Uu.npm.levels}){this.paddings=t.paddingForLevels(e.levels,e.filler),this.options=e}static getLongestLevel(e){let r=Object.keys(e).map(n=>n.length);return Math.max(...r)}static paddingForLevel(e,r,n){let i=n+1-e.length,s=Math.floor(i/r.length);return`${r}${r.repeat(s)}`.slice(0,i)}static paddingForLevels(e,r=" "){let n=t.getLongestLevel(e);return Object.keys(e).reduce((i,s)=>(i[s]=t.paddingForLevel(s,r,n),i),{})}transform(e,r){return e.message=`${this.paddings[e[Zi]]}${e.message}`,e[Fr]&&(e[Fr]=`${this.paddings[e[Zi]]}${e[Fr]}`),e}};Lt.exports=t=>new qt(t);Lt.exports.Padder=Lt.exports.Format=qt});var Xi=f((gg,Wr)=>{"use strict";var{Colorizer:Gu}=Tt(),{Padder:ku}=Br(),{configs:Yu,MESSAGE:Vu}=$(),At=class{constructor(e={}){e.levels||(e.levels=Yu.cli.levels),this.colorizer=new Gu(e),this.padder=new ku(e),this.options=e}transform(e,r){return this.colorizer.transform(this.padder.transform(e,r),r),e[Vu]=`${e.level}:${e.message}`,e}};Wr.exports=t=>new At(t);Wr.exports.Format=At});var es=f((mg,zr)=>{"use strict";var Ku=k();function Qi(t){if(t.every(Ju))return e=>{let r=e;for(let n=0;n<t.length;n++)if(r=t[n].transform(r,t[n].options),!r)return!1;return r}}function Ju(t){if(typeof t.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}zr.exports=(...t)=>{let e=Ku(Qi(t)),r=e();return r.Format=e.Format,r};zr.exports.cascade=Qi});var Xe=f((kr,ns)=>{"use strict";var{hasOwnProperty:Ze}=Object.prototype,Se=Gr();Se.configure=Gr;Se.stringify=Se;Se.default=Se;kr.stringify=Se;kr.configure=Gr;ns.exports=Se;var Zu=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function ce(t){return t.length<5e3&&!Zu.test(t)?`"${t}"`:JSON.stringify(t)}function Hr(t,e){if(t.length>200||e)return t.sort(e);for(let r=1;r<t.length;r++){let n=t[r],i=r;for(;i!==0&&t[i-1]>n;)t[i]=t[i-1],i--;t[i]=n}return t}var Xu=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function Ur(t){return Xu.call(t)!==void 0&&t.length!==0}function ts(t,e,r){t.length<r&&(r=t.length);let n=e===","?"":" ",i=`"0":${n}${t[0]}`;for(let s=1;s<r;s++)i+=`${e}"${s}":${n}${t[s]}`;return i}function Qu(t){if(Ze.call(t,"circularValue")){let e=t.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function el(t){let e;if(Ze.call(t,"deterministic")&&(e=t.deterministic,typeof e!="boolean"&&typeof e!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return e===void 0?!0:e}function tl(t,e){let r;if(Ze.call(t,e)&&(r=t[e],typeof r!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return r===void 0?!0:r}function rs(t,e){let r;if(Ze.call(t,e)){if(r=t[e],typeof r!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${e}" argument must be an integer`);if(r<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return r===void 0?1/0:r}function we(t){return t===1?"1 item":`${t} items`}function rl(t){let e=new Set;for(let r of t)(typeof r=="string"||typeof r=="number")&&e.add(String(r));return e}function nl(t){if(Ze.call(t,"strict")){let e=t.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function Gr(t){t={...t};let e=nl(t);e&&(t.bigint===void 0&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));let r=Qu(t),n=tl(t,"bigint"),i=el(t),s=typeof i=="function"?i:void 0,o=rs(t,"maximumDepth"),a=rs(t,"maximumBreadth");function l(v,u,m,w,O,T){let b=u[v];switch(typeof b=="object"&&b!==null&&typeof b.toJSON=="function"&&(b=b.toJSON(v)),b=w.call(u,v,b),typeof b){case"string":return ce(b);case"object":{if(b===null)return"null";if(m.indexOf(b)!==-1)return r;let x="",D=",",j=T;if(Array.isArray(b)){if(b.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(b),O!==""&&(T+=O,x+=`
${T}`,D=`,
${T}`);let W=Math.min(b.length,a),V=0;for(;V<W-1;V++){let Pe=l(String(V),b,m,w,O,T);x+=Pe!==void 0?Pe:"null",x+=D}let K=l(String(V),b,m,w,O,T);if(x+=K!==void 0?K:"null",b.length-1>a){let Pe=b.length-a-1;x+=`${D}"... ${we(Pe)} not stringified"`}return O!==""&&(x+=`
${j}`),m.pop(),`[${x}]`}let A=Object.keys(b),N=A.length;if(N===0)return"{}";if(o<m.length+1)return'"[Object]"';let q="",B="";O!==""&&(T+=O,D=`,
${T}`,q=" ");let H=Math.min(N,a);i&&!Ur(b)&&(A=Hr(A,s)),m.push(b);for(let W=0;W<H;W++){let V=A[W],K=l(V,b,m,w,O,T);K!==void 0&&(x+=`${B}${ce(V)}:${q}${K}`,B=D)}if(N>a){let W=N-a;x+=`${B}"...":${q}"${we(W)} not stringified"`,B=D}return O!==""&&B.length>1&&(x=`
${T}${x}
${j}`),m.pop(),`{${x}}`}case"number":return isFinite(b)?String(b):e?e(b):"null";case"boolean":return b===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(b);default:return e?e(b):void 0}}function d(v,u,m,w,O,T){switch(typeof u=="object"&&u!==null&&typeof u.toJSON=="function"&&(u=u.toJSON(v)),typeof u){case"string":return ce(u);case"object":{if(u===null)return"null";if(m.indexOf(u)!==-1)return r;let b=T,x="",D=",";if(Array.isArray(u)){if(u.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(u),O!==""&&(T+=O,x+=`
${T}`,D=`,
${T}`);let N=Math.min(u.length,a),q=0;for(;q<N-1;q++){let H=d(String(q),u[q],m,w,O,T);x+=H!==void 0?H:"null",x+=D}let B=d(String(q),u[q],m,w,O,T);if(x+=B!==void 0?B:"null",u.length-1>a){let H=u.length-a-1;x+=`${D}"... ${we(H)} not stringified"`}return O!==""&&(x+=`
${b}`),m.pop(),`[${x}]`}m.push(u);let j="";O!==""&&(T+=O,D=`,
${T}`,j=" ");let A="";for(let N of w){let q=d(N,u[N],m,w,O,T);q!==void 0&&(x+=`${A}${ce(N)}:${j}${q}`,A=D)}return O!==""&&A.length>1&&(x=`
${T}${x}
${b}`),m.pop(),`{${x}}`}case"number":return isFinite(u)?String(u):e?e(u):"null";case"boolean":return u===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(u);default:return e?e(u):void 0}}function g(v,u,m,w,O){switch(typeof u){case"string":return ce(u);case"object":{if(u===null)return"null";if(typeof u.toJSON=="function"){if(u=u.toJSON(v),typeof u!="object")return g(v,u,m,w,O);if(u===null)return"null"}if(m.indexOf(u)!==-1)return r;let T=O;if(Array.isArray(u)){if(u.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(u),O+=w;let q=`
${O}`,B=`,
${O}`,H=Math.min(u.length,a),W=0;for(;W<H-1;W++){let K=g(String(W),u[W],m,w,O);q+=K!==void 0?K:"null",q+=B}let V=g(String(W),u[W],m,w,O);if(q+=V!==void 0?V:"null",u.length-1>a){let K=u.length-a-1;q+=`${B}"... ${we(K)} not stringified"`}return q+=`
${T}`,m.pop(),`[${q}]`}let b=Object.keys(u),x=b.length;if(x===0)return"{}";if(o<m.length+1)return'"[Object]"';O+=w;let D=`,
${O}`,j="",A="",N=Math.min(x,a);Ur(u)&&(j+=ts(u,D,a),b=b.slice(u.length),N-=u.length,A=D),i&&(b=Hr(b,s)),m.push(u);for(let q=0;q<N;q++){let B=b[q],H=g(B,u[B],m,w,O);H!==void 0&&(j+=`${A}${ce(B)}: ${H}`,A=D)}if(x>a){let q=x-a;j+=`${A}"...": "${we(q)} not stringified"`,A=D}return A!==""&&(j=`
${O}${j}
${T}`),m.pop(),`{${j}}`}case"number":return isFinite(u)?String(u):e?e(u):"null";case"boolean":return u===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(u);default:return e?e(u):void 0}}function y(v,u,m){switch(typeof u){case"string":return ce(u);case"object":{if(u===null)return"null";if(typeof u.toJSON=="function"){if(u=u.toJSON(v),typeof u!="object")return y(v,u,m);if(u===null)return"null"}if(m.indexOf(u)!==-1)return r;let w="",O=u.length!==void 0;if(O&&Array.isArray(u)){if(u.length===0)return"[]";if(o<m.length+1)return'"[Array]"';m.push(u);let j=Math.min(u.length,a),A=0;for(;A<j-1;A++){let q=y(String(A),u[A],m);w+=q!==void 0?q:"null",w+=","}let N=y(String(A),u[A],m);if(w+=N!==void 0?N:"null",u.length-1>a){let q=u.length-a-1;w+=`,"... ${we(q)} not stringified"`}return m.pop(),`[${w}]`}let T=Object.keys(u),b=T.length;if(b===0)return"{}";if(o<m.length+1)return'"[Object]"';let x="",D=Math.min(b,a);O&&Ur(u)&&(w+=ts(u,",",a),T=T.slice(u.length),D-=u.length,x=","),i&&(T=Hr(T,s)),m.push(u);for(let j=0;j<D;j++){let A=T[j],N=y(A,u[A],m);N!==void 0&&(w+=`${x}${ce(A)}:${N}`,x=",")}if(b>a){let j=b-a;w+=`${x}"...":"${we(j)} not stringified"`}return m.pop(),`{${w}}`}case"number":return isFinite(u)?String(u):e?e(u):"null";case"boolean":return u===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(u);default:return e?e(u):void 0}}function h(v,u,m){if(arguments.length>1){let w="";if(typeof m=="number"?w=" ".repeat(Math.min(m,10)):typeof m=="string"&&(w=m.slice(0,10)),u!=null){if(typeof u=="function")return l("",{"":v},[],u,w,"");if(Array.isArray(u))return d("",v,[],rl(u),w,"")}if(w.length!==0)return g("",v,[],w,"")}return y("",v,[])}return h}});var Yr=f((yg,is)=>{"use strict";var il=k(),{MESSAGE:sl}=$(),ol=Xe();function al(t,e){return typeof e=="bigint"?e.toString():e}is.exports=il((t,e)=>{let r=ol.configure(e);return t[sl]=r(t,e.replacer||al,e.space),t})});var os=f((_g,ss)=>{"use strict";var ul=k();ss.exports=ul((t,e)=>e.message?(t.message=`[${e.label}] ${t.message}`,t):(t.label=e.label,t))});var us=f((bg,as)=>{"use strict";var ll=k(),{MESSAGE:fl}=$(),cl=Xe();as.exports=ll(t=>{let e={};return t.message&&(e["@message"]=t.message,delete t.message),t.timestamp&&(e["@timestamp"]=t.timestamp,delete t.timestamp),e["@fields"]=t,t[fl]=cl(e),t})});var fs=f((vg,ls)=>{"use strict";var dl=k();function hl(t,e,r){let n=e.reduce((s,o)=>(s[o]=t[o],delete t[o],s),{}),i=Object.keys(t).reduce((s,o)=>(s[o]=t[o],delete t[o],s),{});return Object.assign(t,n,{[r]:i}),t}function pl(t,e,r){return t[r]=e.reduce((n,i)=>(n[i]=t[i],delete t[i],n),{}),t}ls.exports=dl((t,e={})=>{let r="metadata";e.key&&(r=e.key);let n=[];return!e.fillExcept&&!e.fillWith&&(n.push("level"),n.push("message")),e.fillExcept&&(n=e.fillExcept),n.length>0?hl(t,n,r):e.fillWith?pl(t,e.fillWith,r):t})});var ds=f((wg,cs)=>{var Ne=1e3,Ce=Ne*60,$e=Ce*60,Ee=$e*24,gl=Ee*7,ml=Ee*365.25;cs.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return yl(t);if(r==="number"&&isFinite(t))return e.long?bl(t):_l(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function yl(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*ml;case"weeks":case"week":case"w":return r*gl;case"days":case"day":case"d":return r*Ee;case"hours":case"hour":case"hrs":case"hr":case"h":return r*$e;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ce;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ne;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function _l(t){var e=Math.abs(t);return e>=Ee?Math.round(t/Ee)+"d":e>=$e?Math.round(t/$e)+"h":e>=Ce?Math.round(t/Ce)+"m":e>=Ne?Math.round(t/Ne)+"s":t+"ms"}function bl(t){var e=Math.abs(t);return e>=Ee?It(t,e,Ee,"day"):e>=$e?It(t,e,$e,"hour"):e>=Ce?It(t,e,Ce,"minute"):e>=Ne?It(t,e,Ne,"second"):t+" ms"}function It(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var ps=f((Qe,hs)=>{"use strict";var vl=k(),wl=ds();hs.exports=vl(t=>{let e=+new Date;return Qe.diff=e-(Qe.prevTime||e),Qe.prevTime=e,t.ms=`+${wl(Qe.diff)}`,t})});var ys=f((Sg,ms)=>{"use strict";var Sl=require("util").inspect,El=k(),{LEVEL:Ol,MESSAGE:gs,SPLAT:Ml}=$();ms.exports=El((t,e={})=>{let r=Object.assign({},t);return delete r[Ol],delete r[gs],delete r[Ml],t[gs]=Sl(r,!1,e.depth||null,e.colorize),t})});var _s=f((Eg,Dt)=>{"use strict";var{MESSAGE:Rl}=$(),Pt=class{constructor(e){this.template=e}transform(e){return e[Rl]=this.template(e),e}};Dt.exports=t=>new Pt(t);Dt.exports.Printf=Dt.exports.Format=Pt});var ws=f((Og,vs)=>{"use strict";var xl=k(),{MESSAGE:bs}=$(),Tl=Xe();vs.exports=xl(t=>{let e=Tl(Object.assign({},t,{level:void 0,message:void 0,splat:void 0})),r=t.padding&&t.padding[t.level]||"";return e!=="{}"?t[bs]=`${t.level}:${r} ${t.message} ${e}`:t[bs]=`${t.level}:${r} ${t.message}`,t})});var Os=f((Mg,Es)=>{"use strict";var ql=require("util"),{SPLAT:Ss}=$(),Ll=/%[scdjifoO%]/g,Al=/%%/g,Vr=class{constructor(e){this.options=e}_splat(e,r){let n=e.message,i=e[Ss]||e.splat||[],s=n.match(Al),o=s&&s.length||0,l=r.length-o-i.length,d=l<0?i.splice(l,-1*l):[],g=d.length;if(g)for(let y=0;y<g;y++)Object.assign(e,d[y]);return e.message=ql.format(n,...i),e}transform(e){let r=e.message,n=e[Ss]||e.splat;if(!n||!n.length)return e;let i=r&&r.match&&r.match(Ll);if(!i&&(n||n.length)){let s=n.length>1?n.splice(0):n,o=s.length;if(o)for(let a=0;a<o;a++)Object.assign(e,s[a]);return e}return i?this._splat(e,i):e}};Es.exports=t=>new Vr(t)});var Rs=f((jt,Ms)=>{(function(t,e){typeof jt=="object"&&typeof Ms<"u"?e(jt):typeof define=="function"&&define.amd?define(["exports"],e):e(t.fecha={})})(jt,function(t){"use strict";var e=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r="\\d\\d?",n="\\d\\d",i="\\d{3}",s="\\d{4}",o="[^\\s]+",a=/\[([^]*?)\]/gm;function l(c,_){for(var P=[],G=0,E=c.length;G<E;G++)P.push(c[G].substr(0,_));return P}var d=function(c){return function(_,P){var G=P[c].map(function(ne){return ne.toLowerCase()}),E=G.indexOf(_.toLowerCase());return E>-1?E:null}};function g(c){for(var _=[],P=1;P<arguments.length;P++)_[P-1]=arguments[P];for(var G=0,E=_;G<E.length;G++){var ne=E[G];for(var be in ne)c[be]=ne[be]}return c}var y=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["January","February","March","April","May","June","July","August","September","October","November","December"],v=l(h,3),u=l(y,3),m={dayNamesShort:u,dayNames:y,monthNamesShort:v,monthNames:h,amPm:["am","pm"],DoFn:function(c){return c+["th","st","nd","rd"][c%10>3?0:(c-c%10!==10?1:0)*c%10]}},w=g({},m),O=function(c){return w=g(w,c)},T=function(c){return c.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},b=function(c,_){for(_===void 0&&(_=2),c=String(c);c.length<_;)c="0"+c;return c},x={D:function(c){return String(c.getDate())},DD:function(c){return b(c.getDate())},Do:function(c,_){return _.DoFn(c.getDate())},d:function(c){return String(c.getDay())},dd:function(c){return b(c.getDay())},ddd:function(c,_){return _.dayNamesShort[c.getDay()]},dddd:function(c,_){return _.dayNames[c.getDay()]},M:function(c){return String(c.getMonth()+1)},MM:function(c){return b(c.getMonth()+1)},MMM:function(c,_){return _.monthNamesShort[c.getMonth()]},MMMM:function(c,_){return _.monthNames[c.getMonth()]},YY:function(c){return b(String(c.getFullYear()),4).substr(2)},YYYY:function(c){return b(c.getFullYear(),4)},h:function(c){return String(c.getHours()%12||12)},hh:function(c){return b(c.getHours()%12||12)},H:function(c){return String(c.getHours())},HH:function(c){return b(c.getHours())},m:function(c){return String(c.getMinutes())},mm:function(c){return b(c.getMinutes())},s:function(c){return String(c.getSeconds())},ss:function(c){return b(c.getSeconds())},S:function(c){return String(Math.round(c.getMilliseconds()/100))},SS:function(c){return b(Math.round(c.getMilliseconds()/10),2)},SSS:function(c){return b(c.getMilliseconds(),3)},a:function(c,_){return c.getHours()<12?_.amPm[0]:_.amPm[1]},A:function(c,_){return c.getHours()<12?_.amPm[0].toUpperCase():_.amPm[1].toUpperCase()},ZZ:function(c){var _=c.getTimezoneOffset();return(_>0?"-":"+")+b(Math.floor(Math.abs(_)/60)*100+Math.abs(_)%60,4)},Z:function(c){var _=c.getTimezoneOffset();return(_>0?"-":"+")+b(Math.floor(Math.abs(_)/60),2)+":"+b(Math.abs(_)%60,2)}},D=function(c){return+c-1},j=[null,r],A=[null,o],N=["isPm",o,function(c,_){var P=c.toLowerCase();return P===_.amPm[0]?0:P===_.amPm[1]?1:null}],q=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(c){var _=(c+"").match(/([+-]|\d\d)/gi);if(_){var P=+_[1]*60+parseInt(_[2],10);return _[0]==="+"?P:-P}return 0}],B={D:["day",r],DD:["day",n],Do:["day",r+o,function(c){return parseInt(c,10)}],M:["month",r,D],MM:["month",n,D],YY:["year",n,function(c){var _=new Date,P=+(""+_.getFullYear()).substr(0,2);return+(""+(+c>68?P-1:P)+c)}],h:["hour",r,void 0,"isPm"],hh:["hour",n,void 0,"isPm"],H:["hour",r],HH:["hour",n],m:["minute",r],mm:["minute",n],s:["second",r],ss:["second",n],YYYY:["year",s],S:["millisecond","\\d",function(c){return+c*100}],SS:["millisecond",n,function(c){return+c*10}],SSS:["millisecond",i],d:j,dd:j,ddd:A,dddd:A,MMM:["month",o,d("monthNamesShort")],MMMM:["month",o,d("monthNames")],a:N,A:N,ZZ:q,Z:q},H={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},W=function(c){return g(H,c)},V=function(c,_,P){if(_===void 0&&(_=H.default),P===void 0&&(P={}),typeof c=="number"&&(c=new Date(c)),Object.prototype.toString.call(c)!=="[object Date]"||isNaN(c.getTime()))throw new Error("Invalid Date pass to format");_=H[_]||_;var G=[];_=_.replace(a,function(ne,be){return G.push(be),"@@@"});var E=g(g({},w),P);return _=_.replace(e,function(ne){return x[ne](c,E)}),_.replace(/@@@/g,function(){return G.shift()})};function K(c,_,P){if(P===void 0&&(P={}),typeof _!="string")throw new Error("Invalid format in fecha parse");if(_=H[_]||_,c.length>1e3)return null;var G=new Date,E={year:G.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},ne=[],be=[],Ve=_.replace(a,function(Ke,De){return be.push(T(De)),"@@@"}),wt={},oi={};Ve=T(Ve).replace(e,function(Ke){var De=B[Ke],Tr=De[0],Tu=De[1],fi=De[3];if(wt[Tr])throw new Error("Invalid format. "+Tr+" specified twice in format");return wt[Tr]=!0,fi&&(oi[fi]=!0),ne.push(De),"("+Tu+")"}),Object.keys(oi).forEach(function(Ke){if(!wt[Ke])throw new Error("Invalid format. "+Ke+" is required in specified format")}),Ve=Ve.replace(/@@@/g,function(){return be.shift()});var St=c.match(new RegExp(Ve,"i"));if(!St)return null;for(var Mu=g(g({},w),P),Q=1;Q<St.length;Q++){var ai=ne[Q-1],Ru=ai[0],ui=ai[2],li=ui?ui(St[Q],Mu):+St[Q];if(li==null)return null;E[Ru]=li}E.isPm===1&&E.hour!=null&&+E.hour!=12?E.hour=+E.hour+12:E.isPm===0&&+E.hour==12&&(E.hour=0);var Et;if(E.timezoneOffset==null){Et=new Date(E.year,E.month,E.day,E.hour,E.minute,E.second,E.millisecond);for(var Ot=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],Q=0,xu=Ot.length;Q<xu;Q++)if(wt[Ot[Q][0]]&&E[Ot[Q][0]]!==Et[Ot[Q][1]]())return null}else if(Et=new Date(Date.UTC(E.year,E.month,E.day,E.hour,E.minute-E.timezoneOffset,E.second,E.millisecond)),E.month>11||E.month<0||E.day>31||E.day<1||E.hour>23||E.hour<0||E.minute>59||E.minute<0||E.second>59||E.second<0)return null;return Et}var Pe={format:V,parse:K,defaultI18n:m,setGlobalDateI18n:O,setGlobalDateMasks:W};t.assign=g,t.default=Pe,t.format=V,t.parse=K,t.defaultI18n=m,t.setGlobalDateI18n=O,t.setGlobalDateMasks=W,Object.defineProperty(t,"__esModule",{value:!0})})});var Ts=f((Rg,xs)=>{"use strict";var Il=Rs(),Pl=k();xs.exports=Pl((t,e={})=>(e.format&&(t.timestamp=typeof e.format=="function"?e.format():Il.format(new Date,e.format)),t.timestamp||(t.timestamp=new Date().toISOString()),e.alias&&(t[e.alias]=t.timestamp),t))});var Ls=f((xg,qs)=>{"use strict";var Kr=Ar(),Dl=k(),{MESSAGE:Jr}=$();qs.exports=Dl((t,e)=>(e.level!==!1&&(t.level=Kr.strip(t.level)),e.message!==!1&&(t.message=Kr.strip(String(t.message))),e.raw!==!1&&t[Jr]&&(t[Jr]=Kr.strip(String(t[Jr]))),t))});var Xr=f(Zr=>{"use strict";var jl=Zr.format=k();Zr.levels=Gi();function z(t,e){Object.defineProperty(jl,t,{get(){return e()},configurable:!0})}z("align",function(){return Yi()});z("errors",function(){return Ji()});z("cli",function(){return Xi()});z("combine",function(){return es()});z("colorize",function(){return Tt()});z("json",function(){return Yr()});z("label",function(){return os()});z("logstash",function(){return us()});z("metadata",function(){return fs()});z("ms",function(){return ps()});z("padLevels",function(){return Br()});z("prettyPrint",function(){return ys()});z("printf",function(){return _s()});z("simple",function(){return ws()});z("splat",function(){return Os()});z("timestamp",function(){return Ts()});z("uncolorize",function(){return Ls()})});var Qr=f(Nt=>{"use strict";var{format:As}=require("util");Nt.warn={deprecated(t){return()=>{throw new Error(As("{ %s } was removed in winston@3.0.0.",t))}},useFormat(t){return()=>{throw new Error([As("{ %s } was removed in winston@3.0.0.",t),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions(t,e,r){r.forEach(n=>{t[n]=Nt.warn[e](n)})},forProperties(t,e,r){r.forEach(n=>{let i=Nt.warn[e](n);Object.defineProperty(t,n,{get:i,set:i})})}}});var Is=f((Lg,Nl)=>{Nl.exports={name:"winston",description:"A logger for just about everything.",version:"3.17.0",author:"Charlie Robbins <charlie.robbins@gmail.com>",maintainers:["David Hyde <dabh@alumni.stanford.edu>"],repository:{type:"git",url:"https://github.com/winstonjs/winston.git"},keywords:["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],dependencies:{"@dabh/diagnostics":"^2.0.2","@colors/colors":"^1.6.0",async:"^3.2.3","is-stream":"^2.0.0",logform:"^2.7.0","one-time":"^1.0.0","readable-stream":"^3.4.0","safe-stable-stringify":"^2.3.1","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.9.0"},devDependencies:{"@babel/cli":"^7.23.9","@babel/core":"^7.24.0","@babel/preset-env":"^7.24.0","@dabh/eslint-config-populist":"^4.4.0","@types/node":"^20.11.24","abstract-winston-transport":"^0.5.1",assume:"^2.2.0","cross-spawn-async":"^2.2.5",eslint:"^8.57.0",hock:"^1.4.1",mocha:"^10.3.0",nyc:"^17.1.0",rimraf:"5.0.1",split2:"^4.1.0","std-mocks":"^2.0.0",through2:"^4.0.2","winston-compat":"^0.1.5"},main:"./lib/winston.js",browser:"./dist/winston",types:"./index.d.ts",scripts:{lint:"eslint lib/*.js lib/winston/*.js lib/winston/**/*.js --resolve-plugins-relative-to ./node_modules/@dabh/eslint-config-populist",test:"rimraf test/fixtures/logs/* && mocha","test:coverage":"nyc npm run test:unit","test:unit":"mocha test/unit","test:integration":"mocha test/integration",build:"rimraf dist && babel lib -d dist",prepublishOnly:"npm run build"},engines:{node:">= 12.0.0"},license:"MIT"}});var Ds=f((Ag,Ps)=>{Ps.exports=require("util").deprecate});var en=f((Ig,js)=>{js.exports=require("stream")});var rn=f((Pg,Cs)=>{"use strict";function Cl(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(tn,this,t)):process.nextTick(tn,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(Ct,r):(r._writableState.errorEmitted=!0,process.nextTick(Ns,r,s)):process.nextTick(Ns,r,s):e?(process.nextTick(Ct,r),e(s)):process.nextTick(Ct,r)}),this)}function Ns(t,e){tn(t,e),Ct(t)}function Ct(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function $l(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function tn(t,e){t.emit("error",e)}function Fl(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}Cs.exports={destroy:Cl,undestroy:$l,errorOrDestroy:Fl}});var de=f((Dg,Bs)=>{"use strict";var Fs={};function J(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}class i extends r{constructor(o,a,l){super(n(o,a,l))}}i.prototype.name=r.name,i.prototype.code=t,Fs[t]=i}function $s(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function Bl(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Wl(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function zl(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}J("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);J("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&Bl(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(Wl(t," argument"))i=`The ${t} ${n} ${$s(e,"type")}`;else{let s=zl(t,".")?"property":"argument";i=`The "${t}" ${s} ${n} ${$s(e,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);J("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");J("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});J("ERR_STREAM_PREMATURE_CLOSE","Premature close");J("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});J("ERR_MULTIPLE_CALLBACK","Callback called multiple times");J("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");J("ERR_STREAM_WRITE_AFTER_END","write after end");J("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);J("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);J("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Bs.exports.codes=Fs});var nn=f((jg,Ws)=>{"use strict";var Hl=de().codes.ERR_INVALID_OPT_VALUE;function Ul(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function Gl(t,e,r,n){var i=Ul(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new Hl(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}Ws.exports={getHighWaterMark:Gl}});var zs=f((Ng,sn)=>{typeof Object.create=="function"?sn.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:sn.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var Fe=f((Cg,an)=>{try{if(on=require("util"),typeof on.inherits!="function")throw"";an.exports=on.inherits}catch{an.exports=zs()}var on});var Vs=f(($g,Ys)=>{"use strict";function Hs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Us(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hs(Object(r),!0).forEach(function(n){kl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hs(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kl(t,e,r){return e=ks(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ks(n.key),n)}}function Vl(t,e,r){return e&&Gs(t.prototype,e),r&&Gs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ks(t){var e=Kl(t,"string");return typeof e=="symbol"?e:String(e)}function Kl(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jl=require("buffer"),$t=Jl.Buffer,Zl=require("util"),un=Zl.inspect,Xl=un&&un.custom||"inspect";function Ql(t,e,r){$t.prototype.copy.call(t,e,r)}Ys.exports=function(){function t(){Yl(this,t),this.head=null,this.tail=null,this.length=0}return Vl(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return $t.alloc(0);for(var n=$t.allocUnsafe(r>>>0),i=this.head,s=0;i;)Ql(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=$t.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:Xl,value:function(r,n){return un(this,Us(Us({},n),{},{depth:0,customInspect:!1}))}}]),t}()});var Zs=f((ln,Js)=>{var Ft=require("buffer"),ie=Ft.Buffer;function Ks(t,e){for(var r in t)e[r]=t[r]}ie.from&&ie.alloc&&ie.allocUnsafe&&ie.allocUnsafeSlow?Js.exports=Ft:(Ks(Ft,ln),ln.Buffer=Oe);function Oe(t,e,r){return ie(t,e,r)}Oe.prototype=Object.create(ie.prototype);Ks(ie,Oe);Oe.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return ie(t,e,r)};Oe.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=ie(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Oe.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ie(t)};Oe.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ft.SlowBuffer(t)}});var dn=f(Qs=>{"use strict";var cn=Zs().Buffer,Xs=cn.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ef(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function tf(t){var e=ef(t);if(typeof e!="string"&&(cn.isEncoding===Xs||!Xs(t)))throw new Error("Unknown encoding: "+t);return e||t}Qs.StringDecoder=et;function et(t){this.encoding=tf(t);var e;switch(this.encoding){case"utf16le":this.text=uf,this.end=lf,e=4;break;case"utf8":this.fillLast=sf,e=4;break;case"base64":this.text=ff,this.end=cf,e=3;break;default:this.write=df,this.end=hf;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=cn.allocUnsafe(e)}et.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};et.prototype.end=af;et.prototype.text=of;et.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function fn(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function rf(t,e,r){var n=e.length-1;if(n<r)return 0;var i=fn(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=fn(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=fn(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function nf(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function sf(t){var e=this.lastTotal-this.lastNeed,r=nf(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function of(t,e){var r=rf(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function af(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function uf(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function lf(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function ff(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function cf(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function df(t){return t.toString(this.encoding)}function hf(t){return t&&t.length?this.write(t):""}});var Bt=f((Bg,ro)=>{"use strict";var eo=de().codes.ERR_STREAM_PREMATURE_CLOSE;function pf(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function gf(){}function mf(t){return t.setHeader&&typeof t.abort=="function"}function to(t,e,r){if(typeof e=="function")return to(t,null,e);e||(e={}),r=pf(r||gf);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},l=t._readableState&&t._readableState.endEmitted,d=function(){n=!1,l=!0,i||r.call(t)},g=function(u){r.call(t,u)},y=function(){var u;if(n&&!l)return(!t._readableState||!t._readableState.ended)&&(u=new eo),r.call(t,u);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(u=new eo),r.call(t,u)},h=function(){t.req.on("finish",a)};return mf(t)?(t.on("complete",a),t.on("abort",y),t.req?h():t.on("request",h)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",d),t.on("finish",a),e.error!==!1&&t.on("error",g),t.on("close",y),function(){t.removeListener("complete",a),t.removeListener("abort",y),t.removeListener("request",h),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",d),t.removeListener("error",g),t.removeListener("close",y)}}ro.exports=to});var io=f((Wg,no)=>{"use strict";var Wt;function he(t,e,r){return e=yf(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yf(t){var e=_f(t,"string");return typeof e=="symbol"?e:String(e)}function _f(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bf=Bt(),pe=Symbol("lastResolve"),Me=Symbol("lastReject"),tt=Symbol("error"),zt=Symbol("ended"),Re=Symbol("lastPromise"),hn=Symbol("handlePromise"),xe=Symbol("stream");function ge(t,e){return{value:t,done:e}}function vf(t){var e=t[pe];if(e!==null){var r=t[xe].read();r!==null&&(t[Re]=null,t[pe]=null,t[Me]=null,e(ge(r,!1)))}}function wf(t){process.nextTick(vf,t)}function Sf(t,e){return function(r,n){t.then(function(){if(e[zt]){r(ge(void 0,!0));return}e[hn](r,n)},n)}}var Ef=Object.getPrototypeOf(function(){}),Of=Object.setPrototypeOf((Wt={get stream(){return this[xe]},next:function(){var e=this,r=this[tt];if(r!==null)return Promise.reject(r);if(this[zt])return Promise.resolve(ge(void 0,!0));if(this[xe].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[tt]?a(e[tt]):o(ge(void 0,!0))})});var n=this[Re],i;if(n)i=new Promise(Sf(n,this));else{var s=this[xe].read();if(s!==null)return Promise.resolve(ge(s,!1));i=new Promise(this[hn])}return this[Re]=i,i}},he(Wt,Symbol.asyncIterator,function(){return this}),he(Wt,"return",function(){var e=this;return new Promise(function(r,n){e[xe].destroy(null,function(i){if(i){n(i);return}r(ge(void 0,!0))})})}),Wt),Ef),Mf=function(e){var r,n=Object.create(Of,(r={},he(r,xe,{value:e,writable:!0}),he(r,pe,{value:null,writable:!0}),he(r,Me,{value:null,writable:!0}),he(r,tt,{value:null,writable:!0}),he(r,zt,{value:e._readableState.endEmitted,writable:!0}),he(r,hn,{value:function(s,o){var a=n[xe].read();a?(n[Re]=null,n[pe]=null,n[Me]=null,s(ge(a,!1))):(n[pe]=s,n[Me]=o)},writable:!0}),r));return n[Re]=null,bf(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[Me];s!==null&&(n[Re]=null,n[pe]=null,n[Me]=null,s(i)),n[tt]=i;return}var o=n[pe];o!==null&&(n[Re]=null,n[pe]=null,n[Me]=null,o(ge(void 0,!0))),n[zt]=!0}),e.on("readable",wf.bind(null,n)),n};no.exports=Mf});var uo=f((zg,ao)=>{"use strict";function so(t,e,r,n,i,s,o){try{var a=t[s](o),l=a.value}catch(d){r(d);return}a.done?e(l):Promise.resolve(l).then(n,i)}function Rf(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(l){so(s,n,i,o,a,"next",l)}function a(l){so(s,n,i,o,a,"throw",l)}o(void 0)})}}function oo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oo(Object(r),!0).forEach(function(n){Tf(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oo(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tf(t,e,r){return e=qf(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qf(t){var e=Lf(t,"string");return typeof e=="symbol"?e:String(e)}function Lf(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Af=de().codes.ERR_INVALID_ARG_TYPE;function If(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new Af("iterable",["Iterable"],e);var i=new t(xf({objectMode:!0},r)),s=!1;i._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=Rf(function*(){try{var l=yield n.next(),d=l.value,g=l.done;g?i.push(null):i.push(yield d)?o():s=!1}catch(y){i.destroy(y)}}),a.apply(this,arguments)}return i}ao.exports=If});var En=f((Ug,bo)=>{"use strict";bo.exports=L;var Be;L.ReadableState=ho;var Hg=require("events").EventEmitter,co=function(e,r){return e.listeners(r).length},nt=en(),Ht=require("buffer").Buffer,Pf=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Df(t){return Ht.from(t)}function jf(t){return Ht.isBuffer(t)||t instanceof Pf}var pn=require("util"),M;pn&&pn.debuglog?M=pn.debuglog("stream"):M=function(){};var Nf=Vs(),wn=rn(),Cf=nn(),$f=Cf.getHighWaterMark,Ut=de().codes,Ff=Ut.ERR_INVALID_ARG_TYPE,Bf=Ut.ERR_STREAM_PUSH_AFTER_EOF,Wf=Ut.ERR_METHOD_NOT_IMPLEMENTED,zf=Ut.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,We,gn,mn;Fe()(L,nt);var rt=wn.errorOrDestroy,yn=["error","close","destroy","pause","resume"];function Hf(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function ho(t,e,r){Be=Be||Te(),t=t||{},typeof r!="boolean"&&(r=e instanceof Be),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=$f(this,t,"readableHighWaterMark",r),this.buffer=new Nf,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(We||(We=dn().StringDecoder),this.decoder=new We(t.encoding),this.encoding=t.encoding)}function L(t){if(Be=Be||Te(),!(this instanceof L))return new L(t);var e=this instanceof Be;this._readableState=new ho(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),nt.call(this)}Object.defineProperty(L.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});L.prototype.destroy=wn.destroy;L.prototype._undestroy=wn.undestroy;L.prototype._destroy=function(t,e){e(t)};L.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Ht.from(t,e),e=""),n=!0),po(this,t,e,!1,n)};L.prototype.unshift=function(t){return po(this,t,null,!0,!1)};function po(t,e,r,n,i){M("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,kf(t,s);else{var o;if(i||(o=Uf(s,e)),o)rt(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Ht.prototype&&(e=Df(e)),n)s.endEmitted?rt(t,new zf):_n(t,s,e,!0);else if(s.ended)rt(t,new Bf);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?_n(t,s,e,!1):vn(t,s)):_n(t,s,e,!1)}else n||(s.reading=!1,vn(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function _n(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Gt(t)),vn(t,e)}function Uf(t,e){var r;return!jf(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new Ff("chunk",["string","Buffer","Uint8Array"],e)),r}L.prototype.isPaused=function(){return this._readableState.flowing===!1};L.prototype.setEncoding=function(t){We||(We=dn().StringDecoder);var e=new We(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var lo=1073741824;function Gf(t){return t>=lo?t=lo:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function fo(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=Gf(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}L.prototype.read=function(t){M("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return M("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?bn(this):Gt(this),null;if(t=fo(t,e),t===0&&e.ended)return e.length===0&&bn(this),null;var n=e.needReadable;M("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,M("length less than watermark",n)),e.ended||e.reading?(n=!1,M("reading or ended",n)):n&&(M("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=fo(r,e)));var i;return t>0?i=yo(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&bn(this)),i!==null&&this.emit("data",i),i};function kf(t,e){if(M("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Gt(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,go(t)))}}function Gt(t){var e=t._readableState;M("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(M("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(go,t))}function go(t){var e=t._readableState;M("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Sn(t)}function vn(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(Yf,t,e))}function Yf(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(M("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}L.prototype._read=function(t){rt(this,new Wf("_read()"))};L.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,M("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:m;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(w,O){M("onunpipe"),w===r&&O&&O.hasUnpiped===!1&&(O.hasUnpiped=!0,g())}function a(){M("onend"),t.end()}var l=Vf(r);t.on("drain",l);var d=!1;function g(){M("cleanup"),t.removeListener("close",v),t.removeListener("finish",u),t.removeListener("drain",l),t.removeListener("error",h),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",y),d=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}r.on("data",y);function y(w){M("ondata");var O=t.write(w);M("dest.write",O),O===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&_o(n.pipes,t)!==-1)&&!d&&(M("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function h(w){M("onerror",w),m(),t.removeListener("error",h),co(t,"error")===0&&rt(t,w)}Hf(t,"error",h);function v(){t.removeListener("finish",u),m()}t.once("close",v);function u(){M("onfinish"),t.removeListener("close",v),m()}t.once("finish",u);function m(){M("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(M("pipe resume"),r.resume()),t};function Vf(t){return function(){var r=t._readableState;M("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&co(t,"data")&&(r.flowing=!0,Sn(t))}}L.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=_o(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};L.prototype.on=function(t,e){var r=nt.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,M("on readable",n.length,n.reading),n.length?Gt(this):n.reading||process.nextTick(Kf,this)),r};L.prototype.addListener=L.prototype.on;L.prototype.removeListener=function(t,e){var r=nt.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(mo,this),r};L.prototype.removeAllListeners=function(t){var e=nt.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(mo,this),e};function mo(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function Kf(t){M("readable nexttick read 0"),t.read(0)}L.prototype.resume=function(){var t=this._readableState;return t.flowing||(M("resume"),t.flowing=!t.readableListening,Jf(this,t)),t.paused=!1,this};function Jf(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(Zf,t,e))}function Zf(t,e){M("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Sn(t),e.flowing&&!e.reading&&t.read(0)}L.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Sn(t){var e=t._readableState;for(M("flow",e.flowing);e.flowing&&t.read()!==null;);}L.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(M("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(M("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var s=0;s<yn.length;s++)t.on(yn[s],this.emit.bind(this,yn[s]));return this._read=function(o){M("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(L.prototype[Symbol.asyncIterator]=function(){return gn===void 0&&(gn=io()),gn(this)});Object.defineProperty(L.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(L.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(L.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});L._fromList=yo;Object.defineProperty(L.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function yo(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function bn(t){var e=t._readableState;M("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(Xf,e,t))}function Xf(t,e){if(M("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(L.from=function(t,e){return mn===void 0&&(mn=uo()),mn(L,t,e)});function _o(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var Te=f((Gg,wo)=>{"use strict";var Qf=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};wo.exports=se;var vo=En(),Mn=Vt();Fe()(se,vo);for(On=Qf(Mn.prototype),kt=0;kt<On.length;kt++)Yt=On[kt],se.prototype[Yt]||(se.prototype[Yt]=Mn.prototype[Yt]);var On,Yt,kt;function se(t){if(!(this instanceof se))return new se(t);vo.call(this,t),Mn.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",ec)))}Object.defineProperty(se.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(se.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(se.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ec(){this._writableState.ended||process.nextTick(tc,this)}function tc(t){t.end()}Object.defineProperty(se.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var Vt=f((kg,xo)=>{"use strict";xo.exports=C;function Eo(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Tc(e,t)}}var ze;C.WritableState=st;var rc={deprecate:Ds()},Oo=en(),Jt=require("buffer").Buffer,nc=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function ic(t){return Jt.from(t)}function sc(t){return Jt.isBuffer(t)||t instanceof nc}var xn=rn(),oc=nn(),ac=oc.getHighWaterMark,me=de().codes,uc=me.ERR_INVALID_ARG_TYPE,lc=me.ERR_METHOD_NOT_IMPLEMENTED,fc=me.ERR_MULTIPLE_CALLBACK,cc=me.ERR_STREAM_CANNOT_PIPE,dc=me.ERR_STREAM_DESTROYED,hc=me.ERR_STREAM_NULL_VALUES,pc=me.ERR_STREAM_WRITE_AFTER_END,gc=me.ERR_UNKNOWN_ENCODING,He=xn.errorOrDestroy;Fe()(C,Oo);function mc(){}function st(t,e,r){ze=ze||Te(),t=t||{},typeof r!="boolean"&&(r=e instanceof ze),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=ac(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Ec(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Eo(this)}st.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(st.prototype,"buffer",{get:rc.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Kt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Kt=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return Kt.call(this,e)?!0:this!==C?!1:e&&e._writableState instanceof st}})):Kt=function(e){return e instanceof this};function C(t){ze=ze||Te();var e=this instanceof ze;if(!e&&!Kt.call(C,this))return new C(t);this._writableState=new st(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),Oo.call(this)}C.prototype.pipe=function(){He(this,new cc)};function yc(t,e){var r=new pc;He(t,r),process.nextTick(e,r)}function _c(t,e,r,n){var i;return r===null?i=new hc:typeof r!="string"&&!e.objectMode&&(i=new uc("chunk",["string","Buffer"],r)),i?(He(t,i),process.nextTick(n,i),!1):!0}C.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&sc(t);return s&&!Jt.isBuffer(t)&&(t=ic(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=mc),n.ending?yc(this,r):(s||_c(this,n,t,r))&&(n.pendingcb++,i=vc(this,n,s,t,e,r)),i};C.prototype.cork=function(){this._writableState.corked++};C.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Mo(this,t))};C.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new gc(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function bc(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Jt.from(e,r)),e}Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function vc(t,e,r,n,i,s){if(!r){var o=bc(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var d=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},d?d.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Rn(t,e,!1,a,n,i,s);return l}function Rn(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new dc("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function wc(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(it,t,e),t._writableState.errorEmitted=!0,He(t,n)):(i(n),t._writableState.errorEmitted=!0,He(t,n),it(t,e))}function Sc(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Ec(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new fc;if(Sc(r),e)wc(t,r,n,e,i);else{var s=Ro(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Mo(t,r),n?process.nextTick(So,t,r,s,i):So(t,r,s,i)}}function So(t,e,r,n){r||Oc(t,e),e.pendingcb--,n(),it(t,e)}function Oc(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function Mo(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,Rn(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new Eo(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,d=r.encoding,g=r.callback,y=e.objectMode?1:l.length;if(Rn(t,e,!1,y,l,d,g),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}C.prototype._write=function(t,e,r){r(new lc("_write()"))};C.prototype._writev=null;C.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||xc(this,n,r),this};Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Ro(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Mc(t,e){t._final(function(r){e.pendingcb--,r&&He(t,r),e.prefinished=!0,t.emit("prefinish"),it(t,e)})}function Rc(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Mc,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function it(t,e){var r=Ro(e);if(r&&(Rc(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function xc(t,e,r){e.ending=!0,it(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Tc(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});C.prototype.destroy=xn.destroy;C.prototype._undestroy=xn.undestroy;C.prototype._destroy=function(t,e){e(t)}});var Tn=f((Yg,Lo)=>{"use strict";var qc=require("util"),To=Vt(),{LEVEL:qo}=$(),ot=Lo.exports=function(e={}){To.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this.format=e.format,this.level=e.level,this.handleExceptions=e.handleExceptions,this.handleRejections=e.handleRejections,this.silent=e.silent,e.log&&(this.log=e.log),e.logv&&(this.logv=e.logv),e.close&&(this.close=e.close),this.once("pipe",r=>{this.levels=r.levels,this.parent=r}),this.once("unpipe",r=>{r===this.parent&&(this.parent=null,this.close&&this.close())})};qc.inherits(ot,To);ot.prototype._write=function(e,r,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);let i=this.level||this.parent&&this.parent.level;if(!i||this.levels[i]>=this.levels[e[qo]]){if(e&&!this.format)return this.log(e,n);let s,o;try{o=this.format.transform(Object.assign({},e),this.format.options)}catch(a){s=a}if(s||!o){if(n(),s)throw s;return}return this.log(o,n)}return this._writableState.sync=!1,n(null)};ot.prototype._writev=function(e,r){if(this.logv){let n=e.filter(this._accept,this);return n.length?this.logv(n,r):r(null)}for(let n=0;n<e.length;n++){if(!this._accept(e[n]))continue;if(e[n].chunk&&!this.format){this.log(e[n].chunk,e[n].callback);continue}let i,s;try{s=this.format.transform(Object.assign({},e[n].chunk),this.format.options)}catch(o){i=o}if(i||!s){if(e[n].callback(),i)throw r(null),i}else this.log(s,e[n].callback)}return r(null)};ot.prototype._accept=function(e){let r=e.chunk;if(this.silent)return!1;let n=this.level||this.parent&&this.parent.level;return!!((r.exception===!0||!n||this.levels[n]>=this.levels[r[qo]])&&(this.handleExceptions||r.exception!==!0))};ot.prototype._nop=function(){}});var Ln=f((Vg,Io)=>{"use strict";var Lc=require("util"),{LEVEL:qn}=$(),Ao=Tn(),at=Io.exports=function(e={}){if(Ao.call(this,e),!e.transport||typeof e.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=e.transport,this.level=this.level||e.transport.level,this.handleExceptions=this.handleExceptions||e.transport.handleExceptions,this._deprecated();function r(n){this.emit("error",n,this.transport)}this.transport.__winstonError||(this.transport.__winstonError=r.bind(this),this.transport.on("error",this.transport.__winstonError))};Lc.inherits(at,Ao);at.prototype._write=function(e,r,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);(!this.level||this.levels[this.level]>=this.levels[e[qn]])&&this.transport.log(e[qn],e.message,e,this._nop),n(null)};at.prototype._writev=function(e,r){for(let n=0;n<e.length;n++)this._accept(e[n])&&(this.transport.log(e[n].chunk[qn],e[n].chunk.message,e[n].chunk,this._nop),e[n].callback());return r(null)};at.prototype._deprecated=function(){};at.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}});var Ue=f((Kg,An)=>{"use strict";An.exports=Tn();An.exports.LegacyTransportStream=Ln()});var jo=f((Zg,Do)=>{"use strict";var Ac=require("os"),{LEVEL:Po,MESSAGE:In}=$(),Ic=Ue();Do.exports=class extends Ic{constructor(e={}){super(e),this.name=e.name||"console",this.stderrLevels=this._stringArrayToSet(e.stderrLevels),this.consoleWarnLevels=this._stringArrayToSet(e.consoleWarnLevels),this.eol=typeof e.eol=="string"?e.eol:Ac.EOL,this.forceConsole=e.forceConsole||!1,this._consoleLog=void 0,this._consoleWarn=void 0,this._consoleError=void 0,this.setMaxListeners(30)}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.stderrLevels[e[Po]]){console._stderr&&!this.forceConsole||this._consoleError(e[In]),r&&r();return}else if(this.consoleWarnLevels[e[Po]]){console._stderr&&!this.forceConsole||this._consoleWarn(e[In]),r&&r();return}console._stdout&&!this.forceConsole||this._consoleLog(e[In]),r&&r()}_stringArrayToSet(e,r){if(!e)return{};if(r=r||"Cannot make set from type other than Array of string elements",!Array.isArray(e))throw new Error(r);return e.reduce((n,i)=>{if(typeof i!="string")throw new Error(r);return n[i]=!0,n},{})}}});var Xt=f((Zt,No)=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.default=Pc;function Pc(t){return t&&typeof t.length=="number"&&t.length>=0&&t.length%1===0}No.exports=Zt.default});var $o=f((Qt,Co)=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.default=function(t){return function(...e){var r=e.pop();return t.call(this,e,r)}};Co.exports=Qt.default});var Wo=f(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.fallback=Fo;ye.wrap=Bo;var Dc=ye.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,jc=ye.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,Nc=ye.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function Fo(t){setTimeout(t,0)}function Bo(t){return(e,...r)=>t(()=>e(...r))}var ut;Dc?ut=queueMicrotask:jc?ut=setImmediate:Nc?ut=process.nextTick:ut=Fo;ye.default=Bo(ut)});var ko=f((er,Go)=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.default=zc;var Cc=$o(),$c=Uo(Cc),Fc=Wo(),Bc=Uo(Fc),Wc=qe();function Uo(t){return t&&t.__esModule?t:{default:t}}function zc(t){return(0,Wc.isAsync)(t)?function(...e){let r=e.pop(),n=t.apply(this,e);return zo(n,r)}:(0,$c.default)(function(e,r){var n;try{n=t.apply(this,e)}catch(i){return r(i)}if(n&&typeof n.then=="function")return zo(n,r);r(null,n)})}function zo(t,e){return t.then(r=>{Ho(e,null,r)},r=>{Ho(e,r&&(r instanceof Error||r.message)?r:new Error(r))})}function Ho(t,e,r){try{t(e,r)}catch(n){(0,Bc.default)(i=>{throw i},n)}}Go.exports=er.default});var qe=f(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.isAsyncIterable=ue.isAsyncGenerator=ue.isAsync=void 0;var Hc=ko(),Uc=Gc(Hc);function Gc(t){return t&&t.__esModule?t:{default:t}}function Yo(t){return t[Symbol.toStringTag]==="AsyncFunction"}function kc(t){return t[Symbol.toStringTag]==="AsyncGenerator"}function Yc(t){return typeof t[Symbol.asyncIterator]=="function"}function Vc(t){if(typeof t!="function")throw new Error("expected a function");return Yo(t)?(0,Uc.default)(t):t}ue.default=Vc;ue.isAsync=Yo;ue.isAsyncGenerator=kc;ue.isAsyncIterable=Yc});var Ge=f((tr,Vo)=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.default=Kc;function Kc(t,e){if(e||(e=t.length),!e)throw new Error("arity is undefined");function r(...n){return typeof n[e-1]=="function"?t.apply(this,n):new Promise((i,s)=>{n[e-1]=(o,...a)=>{if(o)return s(o);i(a.length>1?a:a[0])},t.apply(this,n)})}return r}Vo.exports=tr.default});var Jo=f((rr,Ko)=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});var Jc=Xt(),Zc=Pn(Jc),Xc=qe(),Qc=Pn(Xc),ed=Ge(),td=Pn(ed);function Pn(t){return t&&t.__esModule?t:{default:t}}rr.default=(0,td.default)((t,e,r)=>{var n=(0,Zc.default)(e)?[]:{};t(e,(i,s,o)=>{(0,Qc.default)(i)((a,...l)=>{l.length<2&&([l]=l),n[s]=l,o(a)})},i=>r(i,n))},3);Ko.exports=rr.default});var Dn=f((nr,Zo)=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.default=rd;function rd(t){function e(...r){if(t!==null){var n=t;t=null,n.apply(this,r)}}return Object.assign(e,t),e}Zo.exports=nr.default});var Qo=f((ir,Xo)=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.default=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()};Xo.exports=ir.default});var ra=f((sr,ta)=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.default=fd;var nd=Xt(),id=ea(nd),sd=Qo(),od=ea(sd);function ea(t){return t&&t.__esModule?t:{default:t}}function ad(t){var e=-1,r=t.length;return function(){return++e<r?{value:t[e],key:e}:null}}function ud(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}function ld(t){var e=t?Object.keys(t):[],r=-1,n=e.length;return function i(){var s=e[++r];return s==="__proto__"?i():r<n?{value:t[s],key:s}:null}}function fd(t){if((0,id.default)(t))return ad(t);var e=(0,od.default)(t);return e?ud(e):ld(t)}ta.exports=sr.default});var jn=f((or,na)=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.default=cd;function cd(t){return function(...e){if(t===null)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,e)}}na.exports=or.default});var ur=f((ar,ia)=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});var dd={};ar.default=dd;ia.exports=ar.default});var oa=f((lr,sa)=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.default=md;var hd=ur(),pd=gd(hd);function gd(t){return t&&t.__esModule?t:{default:t}}function md(t,e,r,n){let i=!1,s=!1,o=!1,a=0,l=0;function d(){a>=e||o||i||(o=!0,t.next().then(({value:h,done:v})=>{if(!(s||i)){if(o=!1,v){i=!0,a<=0&&n(null);return}a++,r(h,l,g),l++,d()}}).catch(y))}function g(h,v){if(a-=1,!s){if(h)return y(h);if(h===!1){i=!0,s=!0;return}if(v===pd.default||i&&a<=0)return i=!0,n(null);d()}}function y(h){s||(o=!1,i=!0,n(h))}d()}sa.exports=lr.default});var fa=f((fr,la)=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});var yd=Dn(),_d=lt(yd),bd=ra(),vd=lt(bd),wd=jn(),Sd=lt(wd),aa=qe(),Ed=oa(),ua=lt(Ed),Od=ur(),Md=lt(Od);function lt(t){return t&&t.__esModule?t:{default:t}}fr.default=t=>(e,r,n)=>{if(n=(0,_d.default)(n),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return n(null);if((0,aa.isAsyncGenerator)(e))return(0,ua.default)(e,t,r,n);if((0,aa.isAsyncIterable)(e))return(0,ua.default)(e[Symbol.asyncIterator](),t,r,n);var i=(0,vd.default)(e),s=!1,o=!1,a=0,l=!1;function d(y,h){if(!o)if(a-=1,y)s=!0,n(y);else if(y===!1)s=!0,o=!0;else{if(h===Md.default||s&&a<=0)return s=!0,n(null);l||g()}}function g(){for(l=!0;a<t&&!s;){var y=i();if(y===null){s=!0,a<=0&&n(null);return}a+=1,r(y.value,y.key,(0,Sd.default)(d))}l=!1}g()};la.exports=fr.default});var Cn=f((cr,ca)=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});var Rd=fa(),xd=Nn(Rd),Td=qe(),qd=Nn(Td),Ld=Ge(),Ad=Nn(Ld);function Nn(t){return t&&t.__esModule?t:{default:t}}function Id(t,e,r,n){return(0,xd.default)(e)(t,(0,qd.default)(r),n)}cr.default=(0,Ad.default)(Id,4);ca.exports=cr.default});var pa=f((dr,ha)=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});var Pd=Cn(),Dd=da(Pd),jd=Ge(),Nd=da(jd);function da(t){return t&&t.__esModule?t:{default:t}}function Cd(t,e,r){return(0,Dd.default)(t,1,e,r)}dr.default=(0,Nd.default)(Cd,3);ha.exports=dr.default});var ya=f((hr,ma)=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.default=zd;var $d=Jo(),Fd=ga($d),Bd=pa(),Wd=ga(Bd);function ga(t){return t&&t.__esModule?t:{default:t}}function zd(t,e){return(0,Fd.default)(Wd.default,t,e)}ma.exports=hr.default});var $n=f((em,ba)=>{"use strict";ba.exports=le;var pr=de().codes,Hd=pr.ERR_METHOD_NOT_IMPLEMENTED,Ud=pr.ERR_MULTIPLE_CALLBACK,Gd=pr.ERR_TRANSFORM_ALREADY_TRANSFORMING,kd=pr.ERR_TRANSFORM_WITH_LENGTH_0,gr=Te();Fe()(le,gr);function Yd(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Ud);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function le(t){if(!(this instanceof le))return new le(t);gr.call(this,t),this._transformState={afterTransform:Yd.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Vd)}function Vd(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){_a(t,e,r)}):_a(this,null,null)}le.prototype.push=function(t,e){return this._transformState.needTransform=!1,gr.prototype.push.call(this,t,e)};le.prototype._transform=function(t,e,r){r(new Hd("_transform()"))};le.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};le.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};le.prototype._destroy=function(t,e){gr.prototype._destroy.call(this,t,function(r){e(r)})};function _a(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new kd;if(t._transformState.transforming)throw new Gd;return t.push(null)}});var Sa=f((tm,wa)=>{"use strict";wa.exports=ft;var va=$n();Fe()(ft,va);function ft(t){if(!(this instanceof ft))return new ft(t);va.call(this,t)}ft.prototype._transform=function(t,e,r){r(null,t)}});var xa=f((rm,Ra)=>{"use strict";var Fn;function Kd(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Ma=de().codes,Jd=Ma.ERR_MISSING_ARGS,Zd=Ma.ERR_STREAM_DESTROYED;function Ea(t){if(t)throw t}function Xd(t){return t.setHeader&&typeof t.abort=="function"}function Qd(t,e,r,n){n=Kd(n);var i=!1;t.on("close",function(){i=!0}),Fn===void 0&&(Fn=Bt()),Fn(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,Xd(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new Zd("pipe"))}}}function Oa(t){t()}function eh(t,e){return t.pipe(e)}function th(t){return!t.length||typeof t[t.length-1]!="function"?Ea:t.pop()}function rh(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=th(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Jd("streams");var i,s=e.map(function(o,a){var l=a<e.length-1,d=a>0;return Qd(o,l,d,function(g){i||(i=g),g&&s.forEach(Oa),!l&&(s.forEach(Oa),n(i))})});return e.reduce(eh)}Ra.exports=rh});var Le=f((Z,dt)=>{var ct=require("stream");process.env.READABLE_STREAM==="disable"&&ct?(dt.exports=ct.Readable,Object.assign(dt.exports,ct),dt.exports.Stream=ct):(Z=dt.exports=En(),Z.Stream=ct||Z,Z.Readable=Z,Z.Writable=Vt(),Z.Duplex=Te(),Z.Transform=$n(),Z.PassThrough=Sa(),Z.finished=Bt(),Z.pipeline=xa())});var La=f((nm,qa)=>{var ke=[],ht=[],Bn=function(){};function zn(t){return~ke.indexOf(t)?!1:(ke.push(t),!0)}function Hn(t){Bn=t}function nh(t){for(var e=[],r=0;r<ke.length;r++){if(ke[r].async){e.push(ke[r]);continue}if(ke[r](t))return!0}return e.length?new Promise(function(i){Promise.all(e.map(function(o){return o(t)})).then(function(o){i(o.some(Boolean))})}):!1}function Un(t){return~ht.indexOf(t)?!1:(ht.push(t),!0)}function Wn(){Bn.apply(Bn,arguments)}function Ta(t){for(var e=0;e<ht.length;e++)t=ht[e].apply(ht[e],arguments);return t}function Gn(t,e){var r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&(t[n]=e[n]);return t}function ih(t){return t.enabled=!1,t.modify=Un,t.set=Hn,t.use=zn,Gn(function(){return!1},t)}function sh(t){function e(){var r=Array.prototype.slice.call(arguments,0);return Wn.call(Wn,t,Ta(r,t)),!0}return t.enabled=!0,t.modify=Un,t.set=Hn,t.use=zn,Gn(e,t)}qa.exports=function(e){return e.introduce=Gn,e.enabled=nh,e.process=Ta,e.modify=Un,e.write=Wn,e.nope=ih,e.yep=sh,e.set=Hn,e.use=zn,e}});var Ia=f((im,Aa)=>{var oh=La(),ah=oh(function t(e,r){return r=r||{},r.namespace=e,r.prod=!0,r.dev=!1,r.force||t.force?t.yep(r):t.nope(r)});Aa.exports=ah});var pt=f((sm,Pa)=>{Pa.exports=Ia()});var ja=f((om,Da)=>{"use strict";var kn=require("fs"),{StringDecoder:uh}=require("string_decoder"),{Stream:lh}=Le();function fh(){}Da.exports=(t,e)=>{let r=Buffer.alloc(65536),n=new uh("utf8"),i=new lh,s="",o=0,a=0;return t.start===-1&&delete t.start,i.readable=!0,i.destroy=()=>{i.destroyed=!0,i.emit("end"),i.emit("close")},kn.open(t.file,"a+","0644",(l,d)=>{if(l){e?e(l):i.emit("error",l),i.destroy();return}(function g(){if(i.destroyed){kn.close(d,fh);return}return kn.read(d,r,0,r.length,o,(y,h)=>{if(y){e?e(y):i.emit("error",y),i.destroy();return}if(!h)return s&&((t.start==null||a>t.start)&&(e?e(null,s):i.emit("line",s)),a++,s=""),setTimeout(g,1e3);let v=n.write(r.slice(0,h));e||i.emit("data",v),v=(s+v).split(/\n+/);let u=v.length-1,m=0;for(;m<u;m++)(t.start==null||a>t.start)&&(e?e(null,v[m]):i.emit("line",v[m])),a++;return s=v[u],o+=h,g()})})()}),e?i.destroy:i}});var Fa=f((um,$a)=>{"use strict";var Y=require("fs"),F=require("path"),Na=ya(),ch=require("zlib"),{MESSAGE:dh}=$(),{Stream:hh,PassThrough:Ca}=Le(),ph=Ue(),te=pt()("winston:file"),gh=require("os"),mh=ja();$a.exports=class extends ph{constructor(e={}){super(e),this.name=e.name||"file";function r(n,...i){i.slice(1).forEach(s=>{if(e[s])throw new Error(`Cannot set ${s} and ${n} together`)})}if(this._stream=new Ca,this._stream.setMaxListeners(30),this._onError=this._onError.bind(this),e.filename||e.dirname)r("filename or dirname","stream"),this._basename=this.filename=e.filename?F.basename(e.filename):"winston.log",this.dirname=e.dirname||F.dirname(e.filename),this.options=e.options||{flags:"a"};else if(e.stream)r("stream","filename","maxsize"),this._dest=this._stream.pipe(this._setupStream(e.stream)),this.dirname=F.dirname(this._dest.path);else throw new Error("Cannot log to file without filename or stream.");this.maxsize=e.maxsize||null,this.rotationFormat=e.rotationFormat||!1,this.zippedArchive=e.zippedArchive||!1,this.maxFiles=e.maxFiles||null,this.eol=typeof e.eol=="string"?e.eol:gh.EOL,this.tailable=e.tailable||!1,this.lazy=e.lazy||!1,this._size=0,this._pendingSize=0,this._created=0,this._drain=!1,this._opening=!1,this._ending=!1,this._fileExist=!1,this.dirname&&this._createLogDirIfNotExist(this.dirname),this.lazy||this.open()}finishIfEnding(){this._ending&&(this._opening?this.once("open",()=>{this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())}):(this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())))}log(e,r=()=>{}){if(this.silent)return r(),!0;if(this._drain){this._stream.once("drain",()=>{this._drain=!1,this.log(e,r)});return}if(this._rotate){this._stream.once("rotate",()=>{this._rotate=!1,this.log(e,r)});return}if(this.lazy){if(!this._fileExist){this._opening||this.open(),this.once("open",()=>{this._fileExist=!0,this.log(e,r)});return}if(this._needsNewFile(this._pendingSize)){this._dest.once("close",()=>{this._opening||this.open(),this.once("open",()=>{this.log(e,r)})});return}}let n=`${e[dh]}${this.eol}`,i=Buffer.byteLength(n);function s(){if(this._size+=i,this._pendingSize-=i,te("logged %s %s",this._size,n),this.emit("logged",e),!this._rotate&&!this._opening&&this._needsNewFile()){if(this.lazy){this._endStream(()=>{this.emit("fileclosed")});return}this._rotate=!0,this._endStream(()=>this._rotateFile())}}this._pendingSize+=i,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);let o=this._stream.write(n,s.bind(this));return o?r():(this._drain=!0,this._stream.once("drain",()=>{this._drain=!1,r()})),te("written",o,this._drain),this.finishIfEnding(),o}query(e,r){typeof e=="function"&&(r=e,e={}),e=y(e);let n=F.join(this.dirname,this.filename),i="",s=[],o=0,a=Y.createReadStream(n,{encoding:"utf8"});a.on("error",h=>{if(a.readable&&a.destroy(),!!r)return h.code!=="ENOENT"?r(h):r(null,s)}),a.on("data",h=>{h=(i+h).split(/\n+/);let v=h.length-1,u=0;for(;u<v;u++)(!e.start||o>=e.start)&&l(h[u]),o++;i=h[v]}),a.on("close",()=>{i&&l(i,!0),e.order==="desc"&&(s=s.reverse()),r&&r(null,s)});function l(h,v){try{let u=JSON.parse(h);g(u)&&d(u)}catch(u){v||a.emit("error",u)}}function d(h){if(e.rows&&s.length>=e.rows&&e.order!=="desc"){a.readable&&a.destroy();return}e.fields&&(h=e.fields.reduce((v,u)=>(v[u]=h[u],v),{})),e.order==="desc"&&s.length>=e.rows&&s.shift(),s.push(h)}function g(h){if(!h||typeof h!="object")return;let v=new Date(h.timestamp);if(!(e.from&&v<e.from||e.until&&v>e.until||e.level&&e.level!==h.level))return!0}function y(h){return h=h||{},h.rows=h.rows||h.limit||10,h.start=h.start||0,h.until=h.until||new Date,typeof h.until!="object"&&(h.until=new Date(h.until)),h.from=h.from||h.until-24*60*60*1e3,typeof h.from!="object"&&(h.from=new Date(h.from)),h.order=h.order||"desc",h}}stream(e={}){let r=F.join(this.dirname,this.filename),n=new hh,i={file:r,start:e.start};return n.destroy=mh(i,(s,o)=>{if(s)return n.emit("error",s);try{n.emit("data",o),o=JSON.parse(o),n.emit("log",o)}catch(a){n.emit("error",a)}}),n}open(){this.filename&&(this._opening||(this._opening=!0,this.stat((e,r)=>{if(e)return this.emit("error",e);te("stat done: %s { size: %s }",this.filename,r),this._size=r,this._dest=this._createStream(this._stream),this._opening=!1,this.once("open",()=>{this._stream.emit("rotate")||(this._rotate=!1)})})))}stat(e){let r=this._getFile(),n=F.join(this.dirname,r);Y.stat(n,(i,s)=>{if(i&&i.code==="ENOENT")return te("ENOENT\xA0ok",n),this.filename=r,e(null,0);if(i)return te(`err ${i.code} ${n}`),e(i);if(!s||this._needsNewFile(s.size))return this._incFile(()=>this.stat(e));this.filename=r,e(null,s.size)})}close(e){this._stream&&this._stream.end(()=>{e&&e(),this.emit("flush"),this.emit("closed")})}_needsNewFile(e){return e=e||this._size,this.maxsize&&e>=this.maxsize}_onError(e){this.emit("error",e)}_setupStream(e){return e.on("error",this._onError),e}_cleanupStream(e){return e.removeListener("error",this._onError),e.destroy(),e}_rotateFile(){this._incFile(()=>this.open())}_endStream(e=()=>{}){this._dest?(this._stream.unpipe(this._dest),this._dest.end(()=>{this._cleanupStream(this._dest),e()})):e()}_createStream(e){let r=F.join(this.dirname,this.filename);te("create stream start",r,this.options);let n=Y.createWriteStream(r,this.options).on("error",i=>te(i)).on("close",()=>te("close",n.path,n.bytesWritten)).on("open",()=>{te("file open ok",r),this.emit("open",r),e.pipe(n),this.rotatedWhileOpening&&(this._stream=new Ca,this._stream.setMaxListeners(30),this._rotateFile(),this.rotatedWhileOpening=!1,this._cleanupStream(n),e.end())});return te("create stream ok",r),n}_incFile(e){te("_incFile",this.filename);let r=F.extname(this._basename),n=F.basename(this._basename,r),i=[];this.zippedArchive&&i.push(function(s){let o=this._created>0&&!this.tailable?this._created:"";this._compressFile(F.join(this.dirname,`${n}${o}${r}`),F.join(this.dirname,`${n}${o}${r}.gz`),s)}.bind(this)),i.push(function(s){this.tailable?this._checkMaxFilesTailable(r,n,s):(this._created+=1,this._checkMaxFilesIncrementing(r,n,s))}.bind(this)),Na(i,e)}_getFile(){let e=F.extname(this._basename),r=F.basename(this._basename,e),n=this.rotationFormat?this.rotationFormat():this._created;return!this.tailable&&this._created?`${r}${n}${e}`:`${r}${e}`}_checkMaxFilesIncrementing(e,r,n){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(n);let i=this._created-this.maxFiles,s=i!==0?i:"",o=this.zippedArchive?".gz":"",a=`${r}${s}${e}${o}`,l=F.join(this.dirname,a);Y.unlink(l,n)}_checkMaxFilesTailable(e,r,n){let i=[];if(!this.maxFiles)return;let s=this.zippedArchive?".gz":"";for(let o=this.maxFiles-1;o>1;o--)i.push(function(a,l){let d=`${r}${a-1}${e}${s}`,g=F.join(this.dirname,d);Y.exists(g,y=>{if(!y)return l(null);d=`${r}${a}${e}${s}`,Y.rename(g,F.join(this.dirname,d),l)})}.bind(this,o));Na(i,()=>{Y.rename(F.join(this.dirname,`${r}${e}${s}`),F.join(this.dirname,`${r}1${e}${s}`),n)})}_compressFile(e,r,n){Y.access(e,Y.F_OK,i=>{if(i)return n();var s=ch.createGzip(),o=Y.createReadStream(e),a=Y.createWriteStream(r);a.on("finish",()=>{Y.unlink(e,n)}),o.pipe(s).pipe(a)})}_createLogDirIfNotExist(e){Y.existsSync(e)||Y.mkdirSync(e,{recursive:!0})}}});var Wa=f((fm,Ba)=>{"use strict";var yh=require("http"),_h=require("https"),{Stream:bh}=Le(),vh=Ue(),{configure:wh}=Xe();Ba.exports=class extends vh{constructor(e={}){super(e),this.options=e,this.name=e.name||"http",this.ssl=!!e.ssl,this.host=e.host||"localhost",this.port=e.port,this.auth=e.auth,this.path=e.path||"",this.maximumDepth=e.maximumDepth,this.agent=e.agent,this.headers=e.headers||{},this.headers["content-type"]="application/json",this.batch=e.batch||!1,this.batchInterval=e.batchInterval||5e3,this.batchCount=e.batchCount||10,this.batchOptions=[],this.batchTimeoutID=-1,this.batchCallback={},this.port||(this.port=this.ssl?443:80)}log(e,r){this._request(e,null,null,(n,i)=>{i&&i.statusCode!==200&&(n=new Error(`Invalid HTTP Status Code: ${i.statusCode}`)),n?this.emit("warn",n):this.emit("logged",e)}),r&&setImmediate(r)}query(e,r){typeof e=="function"&&(r=e,e={}),e={method:"query",params:this.normalizeQuery(e)};let n=e.params.auth||null;delete e.params.auth;let i=e.params.path||null;delete e.params.path,this._request(e,n,i,(s,o,a)=>{if(o&&o.statusCode!==200&&(s=new Error(`Invalid HTTP Status Code: ${o.statusCode}`)),s)return r(s);if(typeof a=="string")try{a=JSON.parse(a)}catch(l){return r(l)}r(null,a)})}stream(e={}){let r=new bh;e={method:"stream",params:e};let n=e.params.path||null;delete e.params.path;let i=e.params.auth||null;delete e.params.auth;let s="",o=this._request(e,i,n);return r.destroy=()=>o.destroy(),o.on("data",a=>{a=(s+a).split(/\n+/);let l=a.length-1,d=0;for(;d<l;d++)try{r.emit("log",JSON.parse(a[d]))}catch(g){r.emit("error",g)}s=a[l]}),o.on("error",a=>r.emit("error",a)),r}_request(e,r,n,i){e=e||{},r=r||this.auth,n=n||this.path||"",this.batch?this._doBatch(e,i,r,n):this._doRequest(e,i,r,n)}_doBatch(e,r,n,i){if(this.batchOptions.push(e),this.batchOptions.length===1){let s=this;this.batchCallback=r,this.batchTimeoutID=setTimeout(function(){s.batchTimeoutID=-1,s._doBatchRequest(s.batchCallback,n,i)},this.batchInterval)}this.batchOptions.length===this.batchCount&&this._doBatchRequest(this.batchCallback,n,i)}_doBatchRequest(e,r,n){this.batchTimeoutID>0&&(clearTimeout(this.batchTimeoutID),this.batchTimeoutID=-1);let i=this.batchOptions.slice();this.batchOptions=[],this._doRequest(i,e,r,n)}_doRequest(e,r,n,i){let s=Object.assign({},this.headers);n&&n.bearer&&(s.Authorization=`Bearer ${n.bearer}`);let o=(this.ssl?_h:yh).request({...this.options,method:"POST",host:this.host,port:this.port,path:`/${i.replace(/^\//,"")}`,headers:s,auth:n&&n.username&&n.password?`${n.username}:${n.password}`:"",agent:this.agent});o.on("error",r),o.on("response",l=>l.on("end",()=>r(null,l)).resume());let a=wh({...this.maximumDepth&&{maximumDepth:this.maximumDepth}});o.end(Buffer.from(a(e,this.options.replacer),"utf8"))}}});var Yn=f((cm,za)=>{"use strict";var oe=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";oe.writable=t=>oe(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";oe.readable=t=>oe(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";oe.duplex=t=>oe.writable(t)&&oe.readable(t);oe.transform=t=>oe.duplex(t)&&typeof t._transform=="function";za.exports=oe});var Ua=f((hm,Ha)=>{"use strict";var Sh=Yn(),{MESSAGE:Eh}=$(),Oh=require("os"),Mh=Ue();Ha.exports=class extends Mh{constructor(e={}){if(super(e),!e.stream||!Sh(e.stream))throw new Error("options.stream is required.");this._stream=e.stream,this._stream.setMaxListeners(1/0),this.isObjectMode=e.stream._writableState.objectMode,this.eol=typeof e.eol=="string"?e.eol:Oh.EOL}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.isObjectMode){this._stream.write(e),r&&r();return}this._stream.write(`${e[Eh]}${this.eol}`),r&&r()}}});var Ga=f(gt=>{"use strict";Object.defineProperty(gt,"Console",{configurable:!0,enumerable:!0,get(){return jo()}});Object.defineProperty(gt,"File",{configurable:!0,enumerable:!0,get(){return Fa()}});Object.defineProperty(gt,"Http",{configurable:!0,enumerable:!0,get(){return Wa()}});Object.defineProperty(gt,"Stream",{configurable:!0,enumerable:!0,get(){return Ua()}})});var yr=f(mt=>{"use strict";var mr=Xr(),{configs:Vn}=$();mt.cli=mr.levels(Vn.cli);mt.npm=mr.levels(Vn.npm);mt.syslog=mr.levels(Vn.syslog);mt.addColors=mr.levels});var Ya=f((_r,ka)=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});var Rh=Xt(),xh=Ae(Rh),Th=ur(),qh=Ae(Th),Lh=Cn(),Ah=Ae(Lh),Ih=Dn(),Ph=Ae(Ih),Dh=jn(),jh=Ae(Dh),Nh=qe(),Ch=Ae(Nh),$h=Ge(),Fh=Ae($h);function Ae(t){return t&&t.__esModule?t:{default:t}}function Bh(t,e,r){r=(0,Ph.default)(r);var n=0,i=0,{length:s}=t,o=!1;s===0&&r(null);function a(l,d){l===!1&&(o=!0),o!==!0&&(l?r(l):(++i===s||d===qh.default)&&r(null))}for(;n<s;n++)e(t[n],n,(0,jh.default)(a))}function Wh(t,e,r){return(0,Ah.default)(t,1/0,e,r)}function zh(t,e,r){var n=(0,xh.default)(t)?Bh:Wh;return n(t,(0,Ch.default)(e),r)}_r.default=(0,Fh.default)(zh,3);ka.exports=_r.default});var Ka=f((br,Va)=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.default=Hh;function Hh(t){return(e,r,n)=>t(e,n)}Va.exports=br.default});var Sr=f((wr,Ja)=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});var Uh=Ya(),Gh=vr(Uh),kh=Ka(),Yh=vr(kh),Vh=qe(),Kh=vr(Vh),Jh=Ge(),Zh=vr(Jh);function vr(t){return t&&t.__esModule?t:{default:t}}function Xh(t,e,r){return(0,Gh.default)(t,(0,Yh.default)((0,Kh.default)(e)),r)}wr.default=(0,Zh.default)(Xh,3);Ja.exports=wr.default});var Xa=f((mm,Za)=>{"use strict";var Qh=Object.prototype.toString;Za.exports=function(e){if(typeof e.displayName=="string"&&e.constructor.name)return e.displayName;if(typeof e.name=="string"&&e.name)return e.name;if(typeof e=="object"&&e.constructor&&typeof e.constructor.name=="string")return e.constructor.name;var r=e.toString(),n=Qh.call(e).slice(8,-1);return n==="Function"?r=r.substring(r.indexOf("(")+1,r.indexOf(")")):r=n,r||"anonymous"}});var Kn=f((ym,Qa)=>{"use strict";var ep=Xa();Qa.exports=function(e){var r=0,n;function i(){return r||(r=1,n=e.apply(this,arguments),e=null),n}return i.displayName=ep(e),i}});var Jn=f(_t=>{_t.get=function(t){var e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var r={},n=Error.prepareStackTrace;Error.prepareStackTrace=function(s,o){return o},Error.captureStackTrace(r,t||_t.get);var i=r.stack;return Error.prepareStackTrace=n,Error.stackTraceLimit=e,i};_t.parse=function(t){if(!t.stack)return[];var e=this,r=t.stack.split(`
`).slice(1);return r.map(function(n){if(n.match(/^\s*[-]{4,}$/))return e._createParsedCallSite({fileName:n,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var i=n.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(i){var s=null,o=null,a=null,l=null,d=null,g=i[5]==="native";if(i[1]){a=i[1];var y=a.lastIndexOf(".");if(a[y-1]=="."&&y--,y>0){s=a.substr(0,y),o=a.substr(y+1);var h=s.indexOf(".Module");h>0&&(a=a.substr(h+1),s=s.substr(0,h))}l=null}o&&(l=s,d=o),o==="<anonymous>"&&(d=null,a=null);var v={fileName:i[2]||null,lineNumber:parseInt(i[3],10)||null,functionName:a,typeName:l,methodName:d,columnNumber:parseInt(i[4],10)||null,native:g};return e._createParsedCallSite(v)}}).filter(function(n){return!!n})};function yt(t){for(var e in t)this[e]=t[e]}var tp=["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"],rp=["topLevel","eval","native","constructor"];tp.forEach(function(t){yt.prototype[t]=null,yt.prototype["get"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});rp.forEach(function(t){yt.prototype[t]=!1,yt.prototype["is"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});_t._createParsedCallSite=function(t){return new yt(t)}});var tu=f((vm,eu)=>{"use strict";var{Writable:np}=Le();eu.exports=class extends np{constructor(e){if(super({objectMode:!0}),!e)throw new Error("ExceptionStream requires a TransportStream instance.");this.handleExceptions=!0,this.transport=e}_write(e,r,n){return e.exception?this.transport.log(e,n):(n(),!0)}}});var Xn=f((Sm,iu)=>{"use strict";var ru=require("os"),ip=Sr(),Zn=pt()("winston:exception"),sp=Kn(),nu=Jn(),op=tu();iu.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle exceptions");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),process.on("uncaughtException",this.catcher))}unhandle(){this.catcher&&(process.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`uncaughtException: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:ru.loadavg(),uptime:ru.uptime()}}getTrace(e){return(e?nu.parse(e):nu.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=!0;let r=new op(e);this.handlers.set(e,r),this.logger.pipe(r)}}_uncaughtException(e){let r=this.getAllInfo(e),n=this._getExceptionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(i=!1);function o(){Zn("doExit",i),Zn("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);ip(n,(a,l)=>{let d=sp(l),g=a.transport||a;function y(h){return()=>{Zn(h),d()}}g._ending=!0,g.once("finish",y("finished")),g.once("error",y("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getExceptionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleExceptions)}}});var ou=f((Om,su)=>{"use strict";var{Writable:ap}=Le();su.exports=class extends ap{constructor(e){if(super({objectMode:!0}),!e)throw new Error("RejectionStream requires a TransportStream instance.");this.handleRejections=!0,this.transport=e}_write(e,r,n){return e.rejection?this.transport.log(e,n):(n(),!0)}}});var ei=f((Rm,lu)=>{"use strict";var au=require("os"),up=Sr(),Qn=pt()("winston:rejection"),lp=Kn(),uu=Jn(),fp=ou();lu.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle rejections");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),process.on("unhandledRejection",this.catcher))}unhandle(){this.catcher&&(process.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`unhandledRejection: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,rejection:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:au.loadavg(),uptime:au.uptime()}}getTrace(e){return(e?uu.parse(e):uu.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleRejections=!0;let r=new fp(e);this.handlers.set(e,r),this.logger.pipe(r)}}_unhandledRejection(e){let r=this.getAllInfo(e),n=this._getRejectionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(i=!1);function o(){Qn("doExit",i),Qn("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);up(n,(a,l)=>{let d=lp(l),g=a.transport||a;function y(h){return()=>{Qn(h),d()}}g._ending=!0,g.once("finish",y("finished")),g.once("error",y("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getRejectionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleRejections)}}});var cu=f((xm,fu)=>{"use strict";var ti=class{constructor(e){let r=Er();if(typeof e!="object"||Array.isArray(e)||!(e instanceof r))throw new Error("Logger is required for profiling");this.logger=e,this.start=Date.now()}done(...e){typeof e[e.length-1]=="function"&&e.pop();let r=typeof e[e.length-1]=="object"?e.pop():{};return r.level=r.level||"info",r.durationMs=Date.now()-this.start,this.logger.write(r)}};fu.exports=ti});var Er=f((Tm,gu)=>{"use strict";var{Stream:cp,Transform:dp}=Le(),du=Sr(),{LEVEL:fe,SPLAT:hu}=$(),pu=Yn(),hp=Xn(),pp=ei(),gp=Ln(),mp=cu(),{warn:yp}=Qr(),_p=yr(),bp=/%[scdjifoO%]/g,Or=class extends dp{constructor(e){super({objectMode:!0}),this.configure(e)}child(e){let r=this;return Object.create(r,{write:{value:function(n){let i=Object.assign({},e,n);n instanceof Error&&(i.stack=n.stack,i.message=n.message),r.write(i)}}})}configure({silent:e,format:r,defaultMeta:n,levels:i,level:s="info",exitOnError:o=!0,transports:a,colors:l,emitErrs:d,formatters:g,padLevels:y,rewriters:h,stripColors:v,exceptionHandlers:u,rejectionHandlers:m}={}){if(this.transports.length&&this.clear(),this.silent=e,this.format=r||this.format||Yr()(),this.defaultMeta=n||null,this.levels=i||this.levels||_p.npm.levels,this.level=s,this.exceptions&&this.exceptions.unhandle(),this.rejections&&this.rejections.unhandle(),this.exceptions=new hp(this),this.rejections=new pp(this),this.profilers={},this.exitOnError=o,a&&(a=Array.isArray(a)?a:[a],a.forEach(w=>this.add(w))),l||d||g||y||h||v)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));u&&this.exceptions.handle(u),m&&this.rejections.handle(m)}isLevelEnabled(e){let r=ri(this.levels,e);if(r===null)return!1;let n=ri(this.levels,this.level);return n===null?!1:!this.transports||this.transports.length===0?n>=r:this.transports.findIndex(s=>{let o=ri(this.levels,s.level);return o===null&&(o=n),o>=r})!==-1}log(e,r,...n){if(arguments.length===1)return e[fe]=e.level,this._addDefaultMeta(e),this.write(e),this;if(arguments.length===2)return r&&typeof r=="object"?(r[fe]=r.level=e,this._addDefaultMeta(r),this.write(r),this):(r={[fe]:e,level:e,message:r},this._addDefaultMeta(r),this.write(r),this);let[i]=n;if(typeof i=="object"&&i!==null&&!(r&&r.match&&r.match(bp))){let o=Object.assign({},this.defaultMeta,i,{[fe]:e,[hu]:n,level:e,message:r});return i.message&&(o.message=`${o.message} ${i.message}`),i.stack&&(o.stack=i.stack),i.cause&&(o.cause=i.cause),this.write(o),this}return this.write(Object.assign({},this.defaultMeta,{[fe]:e,[hu]:n,level:e,message:r})),this}_transform(e,r,n){if(this.silent)return n();e[fe]||(e[fe]=e.level),!this.levels[e[fe]]&&this.levels[e[fe]],this._readableState.pipes;try{this.push(this.format.transform(e,this.format.options))}finally{this._writableState.sync=!1,n()}}_final(e){let r=this.transports.slice();du(r,(n,i)=>{if(!n||n.finished)return setImmediate(i);n.once("finish",i),n.end()},e)}add(e){let r=!pu(e)||e.log.length>2?new gp({transport:e}):e;if(!r._writableState||!r._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",r),this._onEvent("warn",r),this.pipe(r),e.handleExceptions&&this.exceptions.handle(),e.handleRejections&&this.rejections.handle(),this}remove(e){if(!e)return this;let r=e;return(!pu(e)||e.log.length>2)&&(r=this.transports.filter(n=>n.transport===e)[0]),r&&this.unpipe(r),this}clear(){return this.unpipe(),this}close(){return this.exceptions.unhandle(),this.rejections.unhandle(),this.clear(),this.emit("close"),this}setLevels(){yp.deprecated("setLevels")}query(e,r){typeof e=="function"&&(r=e,e={}),e=e||{};let n={},i=Object.assign({},e.query||{});function s(a,l){e.query&&typeof a.formatQuery=="function"&&(e.query=a.formatQuery(i)),a.query(e,(d,g)=>{if(d)return l(d);typeof a.formatResults=="function"&&(g=a.formatResults(g,e.format)),l(null,g)})}function o(a,l){s(a,(d,g)=>{l&&(g=d||g,g&&(n[a.name]=g),l()),l=null})}du(this.transports.filter(a=>!!a.query),o,()=>r(null,n))}stream(e={}){let r=new cp,n=[];return r._streams=n,r.destroy=()=>{let i=n.length;for(;i--;)n[i].destroy()},this.transports.filter(i=>!!i.stream).forEach(i=>{let s=i.stream(e);s&&(n.push(s),s.on("log",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("log",o)}),s.on("error",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("error",o)}))}),r}startTimer(){return new mp(this)}profile(e,...r){let n=Date.now();if(this.profilers[e]){let i=this.profilers[e];delete this.profilers[e],typeof r[r.length-2]=="function"&&r.pop();let s=typeof r[r.length-1]=="object"?r.pop():{};return s.level=s.level||"info",s.durationMs=n-i,s.message=s.message||e,this.write(s)}return this.profilers[e]=n,this}handleExceptions(...e){this.exceptions.handle(...e)}unhandleExceptions(...e){this.exceptions.unhandle(...e)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}_onEvent(e,r){function n(i){e==="error"&&!this.transports.includes(r)&&this.add(r),this.emit(e,i,r)}r["__winston"+e]||(r["__winston"+e]=n.bind(this),r.on(e,r["__winston"+e]))}_addDefaultMeta(e){this.defaultMeta&&Object.assign(e,this.defaultMeta)}};function ri(t,e){let r=t[e];return!r&&r!==0?null:r}Object.defineProperty(Or.prototype,"transports",{configurable:!1,enumerable:!0,get(){let{pipes:t}=this._readableState;return Array.isArray(t)?t:[t].filter(Boolean)}});gu.exports=Or});var ni=f((qm,mu)=>{"use strict";var{LEVEL:vp}=$(),wp=yr(),Sp=Er(),Ep=pt()("winston:create-logger");function Op(t){return"is"+t.charAt(0).toUpperCase()+t.slice(1)+"Enabled"}mu.exports=function(t={}){t.levels=t.levels||wp.npm.levels;class e extends Sp{constructor(i){super(i)}}let r=new e(t);return Object.keys(t.levels).forEach(function(n){Ep('Define prototype method for "%s"',n),n!=="log"&&(e.prototype[n]=function(...i){let s=this||r;if(i.length===1){let[o]=i,a=o&&o.message&&o||{message:o};return a.level=a[vp]=n,s._addDefaultMeta(a),s.write(a),this||r}return i.length===0?(s.log(n,""),s):s.log(n,...i)},e.prototype[Op(n)]=function(){return(this||r).isLevelEnabled(n)})}),r}});var _u=f((Am,yu)=>{"use strict";var Mp=ni();yu.exports=class{constructor(e={}){this.loggers=new Map,this.options=e}add(e,r){if(!this.loggers.has(e)){r=Object.assign({},r||this.options);let n=r.transports||this.options.transports;n?r.transports=Array.isArray(n)?n.slice():[n]:r.transports=[];let i=Mp(r);i.on("close",()=>this._delete(e)),this.loggers.set(e,i)}return this.loggers.get(e)}get(e,r){return this.add(e,r)}has(e){return!!this.loggers.has(e)}close(e){if(e)return this._removeLogger(e);this.loggers.forEach((r,n)=>this._removeLogger(n))}_removeLogger(e){if(!this.loggers.has(e))return;this.loggers.get(e).close(),this._delete(e)}_delete(e){this.loggers.delete(e)}}});var vu=f(I=>{"use strict";var bu=Xr(),{warn:bt}=Qr();I.version=Is().version;I.transports=Ga();I.config=yr();I.addColors=bu.levels;I.format=bu.format;I.createLogger=ni();I.Logger=Er();I.ExceptionHandler=Xn();I.RejectionHandler=ei();I.Container=_u();I.Transport=Ue();I.loggers=new I.Container;var ae=I.createLogger();Object.keys(I.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(t=>I[t]=(...e)=>ae[t](...e));Object.defineProperty(I,"level",{get(){return ae.level},set(t){ae.level=t}});Object.defineProperty(I,"exceptions",{get(){return ae.exceptions}});Object.defineProperty(I,"rejections",{get(){return ae.rejections}});["exitOnError"].forEach(t=>{Object.defineProperty(I,t,{get(){return ae[t]},set(e){ae[t]=e}})});Object.defineProperty(I,"default",{get(){return{exceptionHandlers:ae.exceptionHandlers,rejectionHandlers:ae.rejectionHandlers,transports:ae.transports}}});bt.deprecated(I,"setLevels");bt.forFunctions(I,"useFormat",["cli"]);bt.forProperties(I,"useFormat",["padLevels","stripColors"]);bt.forFunctions(I,"deprecated",["addRewriter","addFilter","clone","extend"]);bt.forProperties(I,"deprecated",["emitErrs","levelLength"])});var wu=f(p=>{"use strict";var Rp=p&&p.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xp=p&&p.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Tp=p&&p.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&Rp(r,e,n[i]);return xp(r,e),r}}();Object.defineProperty(p,"__esModule",{value:!0});p.COMMAND_MAPPINGS=p.MOBILE_PATHS=p.PROC_ALLOWLIST=p.PROC_ALLOWLIST_RAW=p.WEB_ALLOWLIST=p.MAX_BYTES=p.ALLOWED_ROOTS=p.config=p.MOBILE_CONFIG=p.IS_MOBILE_WEB=p.IS_IOS=p.IS_ANDROID=p.IS_MOBILE=p.IS_MACOS=p.IS_LINUX=p.IS_WINDOWS=p.PLATFORM=void 0;var qp=Tp(require("node:os"));p.PLATFORM=qp.platform();p.IS_WINDOWS=p.PLATFORM==="win32";p.IS_LINUX=p.PLATFORM==="linux";p.IS_MACOS=p.PLATFORM==="darwin";p.IS_MOBILE=process.env.MOBILE_PLATFORM==="true"||process.env.REACT_NATIVE==="true";p.IS_ANDROID=process.env.ANDROID==="true"||process.env.PLATFORM==="android";p.IS_IOS=process.env.IOS==="true"||process.env.PLATFORM==="ios";p.IS_MOBILE_WEB=process.env.MOBILE_WEB==="true"||process.env.PLATFORM==="mobile-web";p.MOBILE_CONFIG={enableNativeFeatures:p.IS_ANDROID||p.IS_IOS,enableWebFallbacks:p.IS_MOBILE_WEB||!p.IS_ANDROID&&!p.IS_IOS,maxFileSize:p.IS_MOBILE?50*1024*1024:100*1024*1024,enableCamera:p.IS_ANDROID||p.IS_IOS,enableLocation:p.IS_ANDROID||p.IS_IOS,enableNotifications:p.IS_ANDROID||p.IS_IOS,enableBiometrics:p.IS_ANDROID||p.IS_IOS,enableBluetooth:p.IS_ANDROID||p.IS_IOS,enableNFC:p.IS_ANDROID||p.IS_IOS,enableSensors:p.IS_ANDROID||p.IS_IOS};p.config={allowedRoot:process.env.ALLOWED_ROOT||"",webAllowlist:process.env.WEB_ALLOWLIST||"",procAllowlist:process.env.PROC_ALLOWLIST||"",extraPath:process.env.EXTRA_PATH||"",logLevel:process.env.LOG_LEVEL||"info",maxFileSize:parseInt(process.env.MAX_FILE_SIZE||String(p.MOBILE_CONFIG.maxFileSize)),timeout:parseInt(process.env.COMMAND_TIMEOUT||"30000"),enableSecurityChecks:process.env.ENABLE_SECURITY_CHECKS!=="false",mobilePlatform:p.IS_MOBILE?p.IS_ANDROID?"android":p.IS_IOS?"ios":"mobile-web":"desktop"};p.ALLOWED_ROOTS=p.config.allowedRoot?p.config.allowedRoot.split(",").map(t=>t.trim()).filter(Boolean):[];p.MAX_BYTES=p.config.maxFileSize;p.WEB_ALLOWLIST=[];p.PROC_ALLOWLIST_RAW=p.config.procAllowlist;p.PROC_ALLOWLIST=p.PROC_ALLOWLIST_RAW===""?[]:p.PROC_ALLOWLIST_RAW.split(",").map(t=>t.trim()).filter(Boolean);p.MOBILE_PATHS={android:{internal:"/data/data",external:"/storage/emulated/0",downloads:"/storage/emulated/0/Download",pictures:"/storage/emulated/0/Pictures",documents:"/storage/emulated/0/Documents"},ios:{documents:"/var/mobile/Containers/Data/Application",downloads:"/var/mobile/Containers/Data/Application",pictures:"/var/mobile/Containers/Data/Application",shared:"/var/mobile/Containers/Shared/AppGroup"}};p.COMMAND_MAPPINGS={android:{fileManager:"am start -a android.intent.action.VIEW -d file://",packageManager:"pm",systemSettings:"am start -a android.settings.APPLICATION_DETAILS_SETTINGS",processManager:"ps",serviceManager:"dumpsys",networkManager:"ip",storageManager:"df",userManager:"pm list-users"},ios:{fileManager:"open",packageManager:"dpkg",systemSettings:"open -a Settings",processManager:"ps",serviceManager:"launchctl",networkManager:"ifconfig",storageManager:"df",userManager:"dscl . -list /Users"},windows:{fileManager:"explorer",packageManager:"winget",systemSettings:"ms-settings:",processManager:"tasklist",serviceManager:"sc",networkManager:"ipconfig",storageManager:"wmic logicaldisk",userManager:"net user"},linux:{fileManager:"xdg-open",packageManager:"apt",systemSettings:"gnome-control-center",processManager:"ps",serviceManager:"systemctl",networkManager:"ip",storageManager:"df",userManager:"cat /etc/passwd"},macos:{fileManager:"open",packageManager:"brew",systemSettings:"open -a System\\ Preferences",processManager:"ps",serviceManager:"launchctl",networkManager:"ifconfig",storageManager:"df",userManager:"dscl . -list /Users"}}});var Su=f(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.logger=void 0;Ye.logServerStart=Lp;var Ie=vu(),Mr=wu();Ye.logger=Ie.createLogger({level:Mr.config.logLevel,format:Ie.format.combine(Ie.format.timestamp(),Ie.format.errors({stack:!0}),Ie.format.json()),transports:[new Ie.transports.Console({format:Ie.format.simple()})]});function Lp(t){Ye.logger.info("MCP Server starting",{platform:t,config:{allowedRoot:Mr.config.allowedRoot?"configured":"unrestricted",webAllowlist:Mr.config.webAllowlist?"configured":"unrestricted",procAllowlist:Mr.config.procAllowlist?"configured":"unrestricted"}})}});var Ap=exports&&exports.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ip=exports&&exports.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Rr=exports&&exports.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[n.length]=i);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),i=0;i<n.length;i++)n[i]!=="default"&&Ap(r,e,n[i]);return Ip(r,e),r}}(),Pp=exports&&exports.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var Dp=require("@modelcontextprotocol/sdk/server/mcp.js"),jp=require("@modelcontextprotocol/sdk/server/stdio.js"),S=require("zod"),X=Rr(require("node:path")),vt=Rr(require("node:os")),xr=Rr(require("node:fs/promises")),Np=require("node:child_process"),Cp=require("node:util"),$p=Pp(require("simple-git")),Fp=require("node:fs"),Bp=Rr(require("mathjs")),Eu=Su(),Wp=vt.platform();var si=[process.cwd()],ii=[],zp=1024*1024,Ou=(0,Cp.promisify)(Np.exec);(0,Eu.logServerStart)(Wp);var re=new Dp.McpServer({name:"windows-dev-mcp-minimal",version:"1.0.0"});re.registerTool("health",{description:"Liveness/readiness probe",outputSchema:{ok:S.z.boolean(),roots:S.z.array(S.z.string()),cwd:S.z.string()}},async()=>({content:[{type:"text",text:"ok"}],structuredContent:{ok:!0,roots:si,cwd:process.cwd()}}));re.registerTool("system_info",{description:"Basic host info (OS, arch, cpus, memGB)",outputSchema:{platform:S.z.string(),arch:S.z.string(),cpus:S.z.number(),memGB:S.z.number()}},async()=>({content:[],structuredContent:{platform:vt.platform(),arch:vt.arch(),cpus:vt.cpus().length,memGB:Math.round(vt.totalmem()/1024**3*10)/10}}));function _e(t){let e=X.resolve(t);for(let r of si)if(e.startsWith(X.resolve(r)))return e;throw new Error(`Path outside allowed roots: ${t}`)}function Hp(t,e){if(Buffer.byteLength(t,"utf8")<=e)return{text:t,truncated:!1};let n=t;for(;Buffer.byteLength(n,"utf8")>e;)n=n.slice(0,Math.floor(n.length*.9));return{text:n+`
... [truncated]`,truncated:!0}}re.registerTool("fs_list",{description:"List files/directories under a relative path (non-recursive)",inputSchema:{dir:S.z.string().default(".")},outputSchema:{entries:S.z.array(S.z.object({name:S.z.string(),isDir:S.z.boolean()}))}},async({dir:t})=>{let e;try{e=_e(X.resolve(t))}catch{e=X.resolve(si[0],t),_e(e)}let r=await xr.readdir(e,{withFileTypes:!0});return{content:[],structuredContent:{entries:r.map(n=>({name:n.name,isDir:n.isDirectory()}))}}});re.registerTool("fs_read_text",{description:"Read a UTF-8 text file within the sandbox",inputSchema:{path:S.z.string()},outputSchema:{path:S.z.string(),content:S.z.string(),truncated:S.z.boolean()}},async({path:t})=>{let e=_e(X.resolve(t)),r=await xr.readFile(e,"utf8"),{text:n,truncated:i}=Hp(r,zp);return{content:[],structuredContent:{path:e,content:n,truncated:i}}});re.registerTool("fs_write_text",{description:"Write a UTF-8 text file within the sandbox",inputSchema:{path:S.z.string(),content:S.z.string()},outputSchema:{path:S.z.string(),success:S.z.boolean()}},async({path:t,content:e})=>{let r=_e(X.resolve(t));return await xr.writeFile(r,e,"utf8"),{content:[],structuredContent:{path:r,success:!0}}});re.registerTool("fs_search",{description:"Search for files by name pattern",inputSchema:{pattern:S.z.string(),dir:S.z.string().default(".")},outputSchema:{matches:S.z.array(S.z.string())}},async({pattern:t,dir:e})=>{let r=_e(X.resolve(e)),n=[];try{let{stdout:i}=await Ou(`rg --files --glob "${t}" "${r}"`);n.push(...i.trim().split(`
`).filter(Boolean))}catch{let i=async s=>{let o=[];try{let a=await xr.readdir(s,{withFileTypes:!0});for(let l of a){let d=X.join(s,l.name);l.isDirectory()?o.push(...await i(d)):l.name.includes(t.replace("*",""))&&o.push(d)}}catch{}return o};n.push(...await i(r))}return{content:[],structuredContent:{matches:n}}});re.registerTool("proc_run",{description:"Run a process with arguments",inputSchema:{command:S.z.string(),args:S.z.array(S.z.string()).default([]),cwd:S.z.string().optional()},outputSchema:{success:S.z.boolean(),stdout:S.z.string().optional(),stderr:S.z.string().optional(),exitCode:S.z.number().optional()}},async({command:t,args:e,cwd:r})=>{if(ii.length>0&&!ii.includes(t))throw new Error(`Command not allowed: ${t}. Allowed: ${ii.join(", ")}`);let n=r?_e(X.resolve(r)):process.cwd();try{let{stdout:i,stderr:s}=await Ou(`${t} ${e.join(" ")}`,{cwd:n});return{content:[],structuredContent:{success:!0,stdout:i||void 0,stderr:s||void 0,exitCode:0}}}catch(i){let s=i instanceof Error?i.message:String(i),o=i?.stdout||void 0,a=i?.stderr||void 0,l=i?.code||-1;return{content:[],structuredContent:{success:!1,stdout:o,stderr:a,exitCode:l,error:s}}}});re.registerTool("git_status",{description:"Get git status for a repository",inputSchema:{dir:S.z.string().default(".")},outputSchema:{status:S.z.string(),branch:S.z.string().optional(),changes:S.z.array(S.z.string()).optional()}},async({dir:t})=>{let e=_e(X.resolve(t)),r=(0,$p.default)(e);try{let n=await r.status();return{content:[],structuredContent:{status:"clean",branch:n.current,changes:[...n.modified,...n.created,...n.deleted,...n.renamed]}}}catch(n){return{content:[],structuredContent:{status:"error",error:n instanceof Error?n.message:String(n)}}}});re.registerTool("calculator",{description:"Mathematical calculator with basic functions",inputSchema:{expression:S.z.string(),precision:S.z.number().default(10)},outputSchema:{success:S.z.boolean(),result:S.z.string(),expression:S.z.string(),type:S.z.string(),error:S.z.string().optional()}},async({expression:t,precision:e})=>{try{let r=Bp.evaluate(t),n=typeof r=="number"?r.toFixed(e):String(r);return{content:[],structuredContent:{success:!0,result:n,expression:t,type:"mathematical"}}}catch(r){return{content:[],structuredContent:{success:!1,result:"",expression:t,type:"error",error:r instanceof Error?r.message:String(r)}}}});re.registerTool("download_file",{description:"Download a file from URL",inputSchema:{url:S.z.string().url(),outputPath:S.z.string().optional()},outputSchema:{success:S.z.boolean(),path:S.z.string().optional(),error:S.z.string().optional()}},async({url:t,outputPath:e})=>{try{let r=e||X.basename(new URL(t).pathname)||"downloaded_file",n=X.join(process.cwd(),r);_e(n);let i=await fetch(t);if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);let s=(0,Fp.createWriteStream)(n),o=i.body?.getReader();if(!o)throw new Error("No response body");for(;;){let{done:a,value:l}=await o.read();if(a)break;s.write(l)}return s.end(),{content:[],structuredContent:{success:!0,path:n}}}catch(r){return{content:[],structuredContent:{success:!1,error:r instanceof Error?r.message:String(r)}}}});async function Up(){let t=new jp.StdioServerTransport;await re.connect(t)}Up().catch(t=>{Eu.logger.error("Server error",{error:t instanceof Error?t.message:String(t),stack:t instanceof Error?t.stack:void 0}),process.exit(1)});
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
