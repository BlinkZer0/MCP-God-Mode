# RF Sense Point Cloud Viewer

A cross-platform point cloud viewer for RF sensing data, built with Three.js and designed to work seamlessly with the MCP God Mode RF Sense toolkit.

## Features

### üåê **Cross-Platform Support**
- **Desktop**: Windows, macOS, Linux (Chrome, Firefox, Safari, Edge)
- **Mobile**: iOS, Android (Chrome, Safari, Firefox)
- **PWA**: Installable as a native app on all platforms
- **Offline**: Works without internet connection after initial load

### üéØ **Point Cloud Visualization**
- **Real-time Rendering**: Smooth 60fps point cloud visualization
- **Interactive Controls**: Mouse/touch rotation, zoom, and pan
- **Multiple Formats**: Support for PLY, JSON, and live data streams
- **Color Mapping**: Intensity-based color visualization
- **Point Count Display**: Real-time point count information

### üîó **RF Sense Integration**
- **Live Data**: Connect to live RF sense data streams
- **Session Management**: View specific RF sense sessions
- **Export Support**: Download data in multiple formats
- **Automatic Opening**: Integrated with RF sense tools

## Usage

### 1. **File Loading**
- Click "Open .ply/.json" to load point cloud files
- Supports both PLY and JSON formats
- Drag and drop files (desktop only)

### 2. **Live Data Connection**
- Click "Connect Live" to fetch latest RF sense data
- Automatically connects to MCP server API
- Real-time updates from active RF sense sessions

### 3. **URL Parameters**
- `?sessionId=abc123` - Load specific session data
- `?src=https://...` - Load data from external URL
- `?action=open` - Trigger file picker
- `?action=live` - Auto-connect to live feed

### 4. **Controls**
- **Mouse/Touch**: Rotate view
- **Scroll/Pinch**: Zoom in/out
- **Right-click/Drag**: Pan view
- **Auto-fit**: Automatically centers and scales point cloud

## API Integration

### **Endpoints**
- `GET /viewer/pointcloud` - Main viewer interface
- `GET /api/rf_sense/points` - Latest point cloud data
- `GET /api/rf_sense/sessions` - Available sessions
- `POST /api/rf_sense/points` - Store point cloud data
- `GET /api/rf_sense/export/:id` - Export session data

### **Data Formats**

#### **JSON Format**
```json
{
  "sessionId": "abc123",
  "timestamp": "2024-01-01T00:00:00Z",
  "points": [[x1, y1, z1], [x2, y2, z2], ...],
  "metadata": {
    "source": "rf_sense_wifi_lab",
    "pipeline": "pointcloud",
    "count": 1000
  }
}
```

#### **PLY Format**
```
ply
format ascii 1.0
comment Generated by RF Sense Point Cloud Viewer
element vertex 1000
property float x
property float y
property float z
end_header
0.1 0.2 0.3
0.4 0.5 0.6
...
```

## Installation

### **As PWA (Recommended)**
1. Open the viewer in a modern browser
2. Look for "Install App" prompt or menu option
3. Click "Install" to add to home screen/apps
4. App works offline after installation

### **Desktop Apps**
- **Tauri**: Wrap with `tauri init` for native desktop apps
- **Electron**: Wrap with Electron for cross-platform desktop apps
- **Capacitor**: Wrap with Capacitor for mobile apps

## Development

### **Local Development**
```bash
# Start MCP server with viewer
npm run dev

# Access viewer
open http://localhost:3000/viewer/pointcloud
```

### **Custom Integration**
```javascript
// Store point cloud data
storePointCloudData(sessionId, points, metadata);

// Open viewer
openPointCloudViewer(port);

// Export data
savePointCloud(points, 'output.ply', { format: 'ply' });
```

## Browser Support

### **Full Support**
- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+

### **Mobile Support**
- iOS Safari 13+
- Android Chrome 80+
- Samsung Internet 12+
- Firefox Mobile 75+

### **Features by Platform**
- **Desktop**: Full drag-drop, right-click context menus
- **Mobile**: Touch gestures, file picker, PWA installation
- **All**: WebGL rendering, offline support, live data

## Troubleshooting

### **Common Issues**

1. **Viewer won't load**
   - Check browser WebGL support
   - Ensure MCP server is running
   - Verify port 3000 is accessible

2. **Live data not connecting**
   - Check MCP server status
   - Verify RF sense sessions exist
   - Check network connectivity

3. **Performance issues**
   - Reduce point cloud size
   - Close other browser tabs
   - Use hardware acceleration

4. **Mobile issues**
   - Use Chrome or Safari
   - Enable WebGL in browser settings
   - Check available memory

### **Debug Mode**
Add `?debug=true` to URL for console logging and performance metrics.

## Security

### **Data Privacy**
- All data processing happens locally
- No data sent to external servers
- Ephemeral storage by default
- Audit trails for all operations

### **Access Control**
- Local network only
- Consent-gated operations
- Session-based authentication
- Rate limiting and caps

## Contributing

### **Adding Features**
1. Fork the repository
2. Create feature branch
3. Add tests and documentation
4. Submit pull request

### **Supported Formats**
- PLY (ASCII and binary)
- JSON (array and object formats)
- Custom RF sense formats
- Future: PCD, XYZ, LAS formats

## License

Part of the MCP God Mode project. See main project license for details.

## Support

- **Documentation**: See main MCP God Mode docs
- **Issues**: Report via GitHub issues
- **Community**: Join MCP God Mode community
- **Updates**: Follow project releases
