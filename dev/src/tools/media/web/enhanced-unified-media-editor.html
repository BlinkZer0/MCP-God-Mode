<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Unified Media Editor - Kdenlive + Audacity + GIMP Integration</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1a1a1a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Unified Media Editor">
    <meta name="description" content="Professional multimedia editing suite combining Kdenlive, Audacity, and GIMP functionality with cross-platform support">
    
    <!-- Manifest -->
    <link rel="manifest" href="enhanced-manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/icon-16x16.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <!-- Styles -->
    <link rel="stylesheet" href="enhanced-media-styles.css">
    <link rel="stylesheet" href="unified-editor-styles.css">
    
    <!-- React and Dependencies -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Media Processing Libraries -->
    <script src="https://unpkg.com/fabric@5.3.0/dist/fabric.min.js"></script>
    <script src="https://unpkg.com/wavesurfer.js@7/dist/wavesurfer.js"></script>
    <script src="https://unpkg.com/wavesurfer.js@7/dist/plugins/spectrogram.esm.js"></script>
    <script src="https://unpkg.com/wavesurfer.js@7/dist/plugins/timeline.esm.js"></script>
    <script src="https://unpkg.com/wavesurfer.js@7/dist/plugins/regions.esm.js"></script>
    <script src="https://unpkg.com/wavesurfer.js@7/dist/plugins/minimap.esm.js"></script>
    
    <!-- Video Processing -->
    <script src="https://unpkg.com/opencv.js@1.2.1/opencv.js"></script>
    <script src="https://unpkg.com/ffmpeg.wasm@0.12.10/dist/umd/ffmpeg.js"></script>
    
    <!-- Image Processing -->
    <script src="https://unpkg.com/konva@9.2.0/konva.min.js"></script>
    <script src="https://unpkg.com/react-konva@18.2.10/umd/react-konva.js"></script>
    
    <!-- UI Components -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Cross-Platform Detection -->
    <script src="platform-detection.js"></script>
    
    <!-- Credits and Attribution -->
    <style>
        .credits-section {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-size: 12px;
            max-width: 350px;
            z-index: 1000;
            border: 1px solid #333;
        }
        .credits-section h4 {
            margin: 0 0 10px 0;
            color: #4CAF50;
            font-size: 14px;
        }
        .credits-section p {
            margin: 3px 0;
            font-size: 11px;
            line-height: 1.4;
        }
        .credits-section .project-link {
            color: #4CAF50;
            text-decoration: none;
        }
        .credits-section .project-link:hover {
            text-decoration: underline;
        }
        .credits-toggle {
            position: fixed;
            bottom: 10px;
            right: 370px;
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            z-index: 1001;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        .credits-toggle:hover {
            background: #45a049;
        }
        
        /* Platform-specific styling */
        .platform-ios .editor-header {
            padding-top: env(safe-area-inset-top);
        }
        .platform-android .editor-header {
            padding-top: env(safe-area-inset-top);
        }
        .platform-mobile .editor-sidebar {
            width: 100vw;
            max-width: 400px;
        }
    </style>
</head>
<body>
    <div id="root">
        <div class="loading">
            <div class="spinner"></div>
            <p>Loading Enhanced Unified Media Editor...</p>
            <p class="loading-subtitle">Kdenlive + Audacity + GIMP Integration</p>
            <p class="loading-platform">Detecting platform...</p>
        </div>
    </div>
    
    <!-- Credits Toggle Button -->
    <button class="credits-toggle" onclick="toggleCredits()">Credits & Licenses</button>
    
    <!-- Credits Section -->
    <div class="credits-section" id="creditsSection" style="display: none;">
        <h4>üé¨ Enhanced Unified Media Editor Credits</h4>
        <p><strong>Inspired by and built upon:</strong></p>
        <p>üé¨ <strong>Kdenlive</strong> - <a href="https://kdenlive.org" class="project-link">KDE Community</a>, Jean-Baptiste Mardelle</p>
        <p>üéµ <strong>Audacity</strong> - <a href="https://www.audacityteam.org" class="project-link">Audacity Team</a>, Dominic Mazzoni</p>
        <p>üñºÔ∏è <strong>GIMP</strong> - <a href="https://www.gimp.org" class="project-link">GIMP Development Team</a>, Spencer Kimball, Peter Mattis</p>
        <p><strong>Licenses:</strong> GPL v2+ (Kdenlive, Audacity), GPL v3+ (GIMP)</p>
        <p><strong>Integration & Enhancement:</strong> MCP God Mode Team</p>
        <p><strong>Cross-Platform Support:</strong> iOS, Android, macOS, Linux, Windows</p>
        <p><strong>Version:</strong> 1.0.0 - Unified Integration</p>
    </div>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('enhanced-sw.js')
                    .then(registration => {
                        console.log('Enhanced Unified Media Editor SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('Enhanced Unified Media Editor SW registration failed: ', registrationError);
                    });
            });
        }
        
        function toggleCredits() {
            const creditsSection = document.getElementById('creditsSection');
            creditsSection.style.display = creditsSection.style.display === 'none' ? 'block' : 'none';
        }
        
        // Platform detection and body class assignment
        document.addEventListener('DOMContentLoaded', () => {
            const platform = detectPlatform();
            document.body.classList.add(`platform-${platform}`);
            document.querySelector('.loading-platform').textContent = `Platform: ${platform.toUpperCase()}`;
        });
        
        function detectPlatform() {
            const userAgent = navigator.userAgent.toLowerCase();
            const platform = navigator.platform.toLowerCase();
            
            if (/iphone|ipad|ipod/.test(userAgent)) return 'ios';
            if (/android/.test(userAgent)) return 'android';
            if (/mac/.test(platform)) return 'macos';
            if (/win/.test(platform)) return 'windows';
            if (/linux/.test(platform)) return 'linux';
            
            return 'unknown';
        }
    </script>
    
    <!-- Main Application Script -->
    <script type="text/babel" src="unified-media-app.js"></script>
</body>
</html>
